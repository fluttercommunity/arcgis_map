"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[1428],{88464:(e,t,r)=>{r.d(t,{AM:()=>f});var n=r(36663),s=r(53443),i=r(39994),a=r(67134),o=r(13802),c=r(81977),l=(r(7283),r(40266)),u=r(13045),h=r(60278);const d=-1;let f=class extends s.Z{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,i.Z)("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(S(e))}catch(t){this._transitionTo([]),o.Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return null!==this._to}canTransitionTo(e){try{return this.scale>0&&p(this._current,S(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&p(this._current,e,this.scale)?(this._final=e,this._to=(0,a.d9)(e),function(e,t,r){const n=e.length>t.length?e:t,s=e.length>t.length?t:e,i=s[s.length-1],a=i?.scale??r,o=i?.effects??[];for(let e=s.length;e<n.length;e++)s.push({scale:a,effects:[...o]});for(let e=0;e<n.length;e++)s[e].scale=s[e].scale===d?r:s[e].scale,n[e].scale=n[e].scale===d?r:n[e].scale,(0,h.uF)(s[e].effects,n[e].effects)}(this._current,this._to,this.scale),this._from=(0,a.d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?(0,a.d9)(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let e=0;e<this._current.length;e++){const r=this._current[e],n=this._from[e],s=this._to[e];r.scale=v(n.scale,s.scale,t);for(let e=0;e<r.effects.length;e++){const i=r.effects[e],a=n.effects[e],o=s.effects[e];i.interpolate(a,o,t)}}1===t&&(this._current=this._final,this._set("effects",this._current[0]?(0,a.d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),0===this._current.length)return;const t=this._current,r=this._current.length-1;let n,s,i=1;if(1===t.length||e>=t[0].scale)s=n=t[0].effects;else if(e<=t[r].scale)s=n=t[r].effects;else for(let a=0;a<r;a++){const r=t[a],o=t[a+1];if(r.scale>=e&&o.scale<=e){i=(e-r.scale)/(o.scale-r.scale),n=r.effects,s=o.effects;break}}for(let e=0;e<this.effects.length;e++)this.effects[e].interpolate(n[e],s[e],i)}};function S(e){const t=(0,u.Q)(e)||[];return function(e){const t=e[0];return!!t&&"type"in t}(t)?[{scale:d,effects:t}]:t}function p(e,t,r){return!e[0]?.effects||!t[0]?.effects||!((e[0]?.scale===d||t[0]?.scale===d)&&(e.length>1||t.length>1)&&r<=0)&&(0,h.AS)(e[0].effects,t[0].effects)}function v(e,t,r){return e+(t-e)*r}(0,n._)([(0,c.Cb)()],f.prototype,"_to",void 0),(0,n._)([(0,c.Cb)()],f.prototype,"duration",void 0),(0,n._)([(0,c.Cb)({value:""})],f.prototype,"effect",null),(0,n._)([(0,c.Cb)({readOnly:!0})],f.prototype,"effects",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],f.prototype,"hasEffects",null),(0,n._)([(0,c.Cb)({value:0})],f.prototype,"scale",null),(0,n._)([(0,c.Cb)({readOnly:!0})],f.prototype,"transitioning",null),f=(0,n._)([(0,l.j)("esri.layers.effects.EffectView")],f)},10530:(e,t,r)=>{r.d(t,{W:()=>a});var n=r(19710),s=r(88464),i=r(51118);class a extends i.s{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new s.AM),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const r=e.parent;return r&&r!==this&&r.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}endTransitions(){super.endTransitions(),this._effectView&&(this._effectView.endTransitions(),this.requestRender())}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}beforeRender(e){super.beforeRender(e);for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{dvs:(0,n.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},15875:(e,t,r)=>{r.d(t,{mR:()=>X,C$:()=>B,e2:()=>z,Jq:()=>fe,wO:()=>Y,Mk:()=>Z,cM:()=>Q,Z_:()=>ee,ws:()=>H,xV:()=>W,Ub:()=>de,UK:()=>q,Yw:()=>$,$_:()=>C,Gr:()=>ne,nU:()=>G,Ll:()=>ce,$K:()=>P,DQ:()=>ie,HX:()=>re,yP:()=>pe,hj:()=>x,iw:()=>oe,TB:()=>ue,sG:()=>te,Gg:()=>le,js:()=>he,Y8:()=>F});var n=r(70375),s=r(13802),i=(r(19431),r(25609)),a=(r(62173),r(38716)),o=r(34596);class c{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(e,t,r,n,s,i,a,o,c){this.color=e,this.haloColor=t,this.haloSize=r,this.size=n,this.angle=s,this.offsetX=i,this.offsetY=a,this.hAnchor=o,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}c.pool=new o.Z(c);var l=r(91907),u=(r(43487),r(41163));const h=s.Z.getLogger("esri.views.2d.engine.webgl.Utils"),d="geometry",f=[{name:d,strideInBytes:12}],S=[{name:d,strideInBytes:36}],p=[{name:d,strideInBytes:24}],v=[{name:d,strideInBytes:12}],g=[{name:d,strideInBytes:40}],_=[{name:d,strideInBytes:36}],m=[{name:d,strideInBytes:36}];function y(e){const t={};for(const r of e)t[r.name]=r.strideInBytes;return t}const T=y([{name:d,strideInBytes:36}]),L=y(f),E=y(S),I=y(p),A=y(v),V=y(g),b=y(_),O=y(m);function C(e,t){switch(e){case a.LW.MARKER:return t===a.mD.HEATMAP?L:T;case a.LW.FILL:switch(t){case a.mD.DOT_DENSITY:return A;case a.mD.SIMPLE:case a.mD.OUTLINE_FILL_SIMPLE:return I;default:return E}case a.LW.LINE:return V;case a.LW.TEXT:return b;case a.LW.LABEL:return O}}const R=[d],w=[d],N=[d],M=[d],U=[d];function D(e){switch(e){case a.LW.MARKER:return R;case a.LW.FILL:return w;case a.LW.LINE:return N;case a.LW.TEXT:return M;case a.LW.LABEL:return U}}function F(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function B(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}}function z(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}}function P(e){return null!=e}function x(e){return"number"==typeof e}function H(e){switch(e){case"butt":return i.RL.BUTT;case"round":return i.RL.ROUND;case"square":return i.RL.SQUARE;default:return h.error(new n.Z("mapview-invalid-type",`Cap type ${e} is not a valid option. Defaulting to round`)),i.RL.ROUND}}function W(e){switch(e){case"miter":return i.AH.MITER;case"bevel":return i.AH.BEVEL;case"round":return i.AH.ROUND;default:return h.error(new n.Z("mapview-invalid-type",`Join type ${e} is not a valid option. Defaulting to round`)),i.AH.ROUND}}function G(e){switch(e){case"opacity":return a.pc.OPACITY;case"color":return a.pc.COLOR;case"rotation":return a.pc.ROTATION;case"size":return a.pc.SIZE;default:return h.error(`Cannot interpret unknown vv: ${e}`),null}}function Y(e,t,r,n,s,i,a){for(const t in i){const n=i[t].stride,a=F(n),o=i[t].data,c=r[t].data,l=n*s.vertexCount/a,u=n*e/a,h=n*s.vertexFrom/a;for(let e=0;e<l;++e)c[e+u]=o[e+h]}const o=s.indexCount;for(let r=0;r<o;++r)n[r+t]=a[r+s.indexFrom]-s.vertexFrom+e}const X={[d]:l.l1.STATIC_DRAW};function Z(e,t){const r=[];for(let n=0;n<5;++n){const s=D(n),i={};for(const e of s)i[e]={data:t(n,e)};r.push({data:e(n),buffers:i})}return r}function k(e){switch(e){case l.g.BYTE:case l.g.UNSIGNED_BYTE:return 1;case l.g.SHORT:case l.g.UNSIGNED_SHORT:return 2;case l.g.FLOAT:case l.g.INT:case l.g.UNSIGNED_INT:return 4}}function $(e){switch(e){case l.Br.UNSIGNED_BYTE:return 1;case l.Br.UNSIGNED_SHORT_4_4_4_4:return 2;case l.Br.FLOAT:return 4;default:return void h.error(new n.Z("webgl-utils",`Unable to handle type ${e}`))}}function q(e){switch(e){case l.Br.UNSIGNED_BYTE:return Uint8Array;case l.Br.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case l.Br.FLOAT:return Float32Array;default:return void h.error(new n.Z("webgl-utils",`Unable to handle type ${e}`))}}const K=e=>{const t=new Map;for(const r in e)for(const n of e[r])t.set(n.name,n.location);return t},j=e=>{const t={};for(const r in e){const n=e[r];t[r]=n.length?n[0].stride:0}return t},J=new Map,Q=(e,t)=>{if(!J.has(e)){const r=function(e){const t={};for(const r in e){const n=e[r];let s=0;t[r]=n.map((e=>{const t=new u.G(e.name,e.count,e.type,s,0,e.normalized||!1);return s+=e.count*k(e.type),t})),t[r].forEach((e=>e.stride=s))}return t}(t),n={strides:j(r),bufferLayouts:r,attributes:K(t)};J.set(e,n)}return J.get(e)};function ee(e){e(a.LW.FILL),e(a.LW.LINE),e(a.LW.MARKER),e(a.LW.TEXT),e(a.LW.LABEL)}const te=e=>"path"in e&&Se(e.path),re=e=>"url"in e&&e.url||"imageData"in e&&e.imageData,ne=e=>"imageData"in e&&e.imageData&&"contentType"in e&&e.contentType?`data:${e.contentType};base64,${e.imageData}`:"url"in e?e.url:null,se=e=>e.startsWith("data:image/gif"),ie=e=>"url"in e&&e.url&&(e.url.includes(".gif")||se(e.url))||"contentType"in e&&"image/gif"===e.contentType||"imageData"in e&&se(e.imageData),ae=e=>e.startsWith("data:image/png"),oe=e=>"url"in e&&e.url&&(e.url.includes(".png")||ae(e.url))||"contentType"in e&&"image/png"===e.contentType||"imageData"in e&&ae(e.imageData),ce=e=>e.type&&e.type.toLowerCase().includes("3d");function le(e){switch(e.type){case"line":{const t=e;return"CIMSolidStroke"===t.cim.type&&!t.dashTemplate}case"fill":return"CIMSolidFill"===e.cim.type;case"esriSFS":return"esriSFSSolid"===e.style||"esriSFSNull"===e.style;case"esriSLS":return"esriSLSSolid"===e.style||"esriSLSNull"===e.style;default:return!1}}const ue=e=>e.includes("data:image/svg+xml");function he(e){switch("cim"in e?e.cim.type:e.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":return!1;case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":return pe(e);default:return!0}}function de(e){const t="maxVVSize"in e&&e.maxVVSize,r="width"in e&&e.width||"size"in e&&e.size||0;return t||r}function fe(e){const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}const Se=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4)),pe=e=>"fill"===e.type&&"CIMMarkerPlacementInsidePolygon"===e?.cim?.markerPlacement?.type},31090:(e,t,r)=>{var n,s;function i(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function a(e){switch(e){case"top":return s.Top;case"middle":return s.Center;case"baseline":return s.Baseline;case"bottom":return s.Bottom}}function o(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[n.Right,s.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[n.Center,s.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[n.Left,s.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[n.Right,s.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[n.Center,s.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[n.Left,s.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[n.Right,s.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[n.Center,s.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[n.Left,s.Top];default:return console.debug(`Found invalid placement type ${e}`),[n.Center,s.Center]}}function c(e){switch(e){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function l(e){switch(e){case s.Top:return 1;case s.Center:return 0;case s.Bottom:case s.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function u(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}r.d(t,{Hd:()=>u,M7:()=>n,NS:()=>h,TR:()=>s,b7:()=>a,g:()=>c,kH:()=>i,qv:()=>o,tf:()=>l}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(n||(n={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(s||(s={}))},62173:(e,t,r)=>{r.d(t,{Vs:()=>c,aH:()=>o,pr:()=>i,t2:()=>a});var n=r(61681),s=r(8530);function i(e,t=0,r=!1){const n=e[t+3];return e[t+0]*=n,e[t+1]*=n,e[t+2]*=n,r||(e[t+3]*=255),e}function a(e){if(!e)return 0;const{r:t,g:r,b:n,a:i}=e;return(0,s.Jz)(t*i,r*i,n*i,255*i)}function o(e){if(!e)return 0;const[t,r,n,i]=e;return(0,s.Jz)(t*(i/255),r*(i/255),n*(i/255),i)}function c(e,t,r=0){if((0,n.Wi)(t))return e[r+0]=0,e[r+1]=0,e[r+2]=0,void(e[r+3]=0);const{r:s,g:i,b:a,a:o}=t;e[r+0]=s*o/255,e[r+1]=i*o/255,e[r+2]=a*o/255,e[r+3]=o}},38716:(e,t,r)=>{var n,s,i,a,o,c,l,u;r.d(t,{LW:()=>n,Un:()=>l,X:()=>o,jx:()=>i,mD:()=>u,mf:()=>c,pc:()=>a}),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"}(n||(n={})),function(e){e[e.SUCCEEDED=0]="SUCCEEDED",e[e.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(s||(s={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(i||(i={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.OPACITY=1]="OPACITY",e[e.COLOR=2]="COLOR",e[e.ROTATION=4]="ROTATION",e[e.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",e[e.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",e[e.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",e[e.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(o||(o={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(c||(c={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(l||(l={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(u||(u={}))},89106:(e,t,r)=>{r.d(t,{CA:()=>l,Gq:()=>T,Xp:()=>c,a:()=>m,dk:()=>g,hF:()=>h,jj:()=>u,jy:()=>o,m2:()=>d,mE:()=>_,qr:()=>y});var n=r(70375),s=r(31090),i=r(38716);const a=Object.keys(i.mD).filter((e=>"number"==typeof i.mD[e])).reduce(((e,t)=>({...e,[t]:i.mD[t]})),{});function o(e){return e===i.mD.OUTLINE_FILL||e===i.mD.OUTLINE_FILL_SIMPLE}function c(e){return function(e){return e===i.mD.SIMPLE||e===i.mD.OUTLINE_FILL_SIMPLE}(e.symbologyType)}function l(e){return o(e.symbologyType)}function u(e,t){switch(e){case i.LW.FILL:return g.from(t);case i.LW.LINE:return m.from(t);case i.LW.MARKER:return _.from(t);case i.LW.TEXT:return y.from(t);case i.LW.LABEL:return T.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function h(e){switch(d.load(e).geometryType){case i.LW.MARKER:return new _(e);case i.LW.FILL:return new g(e);case i.LW.LINE:return new m(e);case i.LW.TEXT:return new y(e);case i.LW.LABEL:return new T(e)}}class d{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case i.LW.FILL:return"fill";case i.LW.MARKER:return"marker";case i.LW.LINE:return"line";case i.LW.TEXT:return"text";case i.LW.LABEL:return"label";default:throw new n.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const r=1<<e;t?this._data|=r:this._data&=~r}bit(e){return(this._data&1<<e)>>e}setBits(e,t,r){for(let n=t,s=0;n<r;n++,s++)this.setBit(n,0!=(e&1<<s))}bits(e,t){let r=0;for(let n=e,s=0;n<t;n++,s++)r|=this.bit(n)<<s;return r}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:i.mD[this.symbologyType],options:a,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}d.shared=new d(0);const f=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const r=function(e,t,r){const n=i.X.SIZE_FIELD_STOPS|i.X.SIZE_MINMAX_VALUE|i.X.SIZE_SCALE_STOPS|i.X.SIZE_UNIT_VALUE,s=(t&(i.mf.FIELD_TARGETS_OUTLINE|i.mf.MINMAX_TARGETS_OUTLINE|i.mf.SCALE_TARGETS_OUTLINE|i.mf.UNIT_TARGETS_OUTLINE))>>>4;return e===i.LW.LINE&&r.isOutline||e===i.LW.FILL&&o(r.symbologyType)?n&s:n&~s}(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(r&i.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&i.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&i.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&i.X.SIZE_SCALE_STOPS)}},S=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&i.X.ROTATION)}},p=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&i.X.COLOR)}},v=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&i.X.OPACITY)}};class g extends(p(v(f(d)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=i.LW.FILL,n.symbologyType=t,t!==i.mD.DOT_DENSITY&&n.setVV(r,e),n.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0);class _ extends(p(v(S(f(d))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=i.LW.MARKER,n.symbologyType=t,t!==i.mD.HEATMAP&&n.setVV(r,e),n.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}_.shared=new _(0);class m extends(p(v(f(d)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=i.LW.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);class y extends(p(v(S(f(d))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=i.LW.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}y.shared=new y(0);class T extends(f(d)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=i.LW.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=(0,s.NS)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}T.shared=new T(0)},8530:(e,t,r)=>{r.d(t,{Au:()=>s,Jz:()=>a,UJ:()=>i});const n=new Float32Array(1);new Uint32Array(n.buffer);function s(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function i(e,t){return 65535&e|t<<16}function a(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24}},21402:(e,t,r)=>{r.d(t,{v:()=>s});var n=r(61681);class s{static getStorageSpec(e){return null}static createOrUpdateRendererSchema(e,t){return(0,n.pC)(e)&&"default"===e.type?e:{type:"default"}}static getVariation(e){return{}}static getVariationHash(e){return 0}}s.type="default",s.programSpec=null},98313:(e,t,r)=>{r.d(t,{t4:()=>g,a1:()=>m,EJ:()=>_});var n=r(70375),s=r(38716),i=r(89106),a=r(21402),o=r(61681),c=r(62173),l=r(14266),u=r(91907);class h extends a.v{static getStorageSpec({attributes:e}){return{visualVariables:!1,attributes:e??null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(e,t){const{attributes:r,dotValue:n,referenceScale:s,dotSize:i,dotBlendingEnabled:a,seed:u,backgroundColor:h}=t,d=(0,o.pC)(e)&&"dot-density"===e.type?e:this._createRendererSchema();d.dotValue=n,d.dotSize=i,d.dotScale=s,d.dotBlending=a,d.seed=u;const{colors:f,activeDots:S,backgroundColor:p}=d;for(let e=0;e<l.$0;e++){const t=e>=r.length?null:r[e].color;(0,c.Vs)(f,t,4*e)}for(let e=0;e<8;e++)S[e]=e<t.attributes.length?1:0;return(0,c.Vs)(p,h),d}static getVariation(e){return{ddDotBlending:e.dotBlending}}static getVariationHash(e){return e.dotBlending?1:0}}h.type="dot-density",h.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:u.g.SHORT},{location:1,name:"a_id",count:3,type:u.g.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:u.g.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:u.g.FLOAT}]}};var d=r(95550),f=r(94672);class S extends a.v{static getStorageSpec({field:e,valueExpression:t}){return{visualVariables:!1,attributes:e||t?[{field:e,valueExpression:t}]:null}}static _createRendererSchema(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}}static createOrUpdateRendererSchema(e,t){const{radius:r,minDensity:n,maxDensity:s,referenceScale:i,field:a,valueExpression:c,colorStops:l}=t,u=s-n,h=a||c?1:0,S=l.map((({color:e,ratio:t})=>`${t}:${e.toString()}`)).join();let p,v=!0;return(0,o.pC)(e)&&"heatmap"===e.type?(p=e,v=S!==e.gradientHash):p=this._createRendererSchema(),p.radius=(0,d.F2)(r),p.minDensity=n,p.densityRange=u,p.referenceScale=i,p.isFieldActive=h,v&&(p.gradient=(0,f.uI)(l),p.gradientHash=S),p}}S.type="heatmap",S.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:u.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:u.g.SHORT},{location:4,name:"a_id",count:4,type:u.g.UNSIGNED_BYTE}]}};var p=r(30936);class v extends a.v{static getStorageSpec({attributes:e}){return{visualVariables:!0,attributes:e??null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*l.eV),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(e,t){const{attributes:r,defaultColor:n,holePercentage:s,othersCategory:i,outline:a}=t,u=(0,o.pC)(e)&&"pie-chart"===e.type?e:this._createRendererSchema();for(let e=0;e<l.eV;e++){const t=e>=r.length?new p.Z([0,0,0,0]):r[e].color;(0,c.Vs)(u.colors,t,4*e)}return(0,c.Vs)(u.defaultColor,n),(0,c.Vs)(u.othersColor,i?.color),(0,c.Vs)(u.outlineColor,a?.color),u.outlineWidth=(0,d.F2)(a?.width||0),u.holePercentage=s,u.sectorThreshold=i?.threshold||0,u.numberOfFields=r.length,u}static getVariation(e){return{numberOfFields:e.numberOfFields}}static getVariationHash(e){return e.numberOfFields}}function g(e,t){if(e.type!==t)throw new n.Z("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${t}" but found type "${e.type}"`)}function _(e){switch(e?.type){case"dot-density":return h;case"heatmap":return S;case"pie-chart":return v;default:return a.v}}function m(e){const{geometryType:t,symbologyType:r}=i.m2.load(e);switch(t){case s.LW.FILL:if(r===s.mD.DOT_DENSITY)return h;break;case s.LW.MARKER:switch(r){case s.mD.HEATMAP:return S;case s.mD.PIE_CHART:return v}}return a.v}v.type="pie-chart",v.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:u.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:u.g.SHORT},{location:2,name:"a_texCoords",count:2,type:u.g.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:u.g.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:u.g.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:u.g.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:u.g.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:u.g.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:u.g.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]}}}]);