"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[1123],{36609:(t,e,i)=>{i.d(e,{r:()=>_});i(91957);var s=i(80085),r=(i(4905),i(23148)),o=i(95550),n=i(55709),a=i(69666),h=i(8909),c=i(25609),l=i(55444),p=i(50639),d=i(4371),y=i(1759),v=i(15498),u=i(62589),g=i(67666),m=i(90819);class _ extends d.a{constructor(t){super(),this._graphicsLayer=t}visualizeIntersectionPoint(t,e){return this._visualizeSnappingIndicator(new g.Z({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:e.spatialReference}),b)}visualizePoint(t,e){return this._visualizeSnappingIndicator(new g.Z({x:t.point[0],y:t.point[1],spatialReference:e.spatialReference}),w)}visualizeLine(t,e){return this._visualizeSnappingIndicator(new m.Z({paths:[[t.lineStart,t.lineEnd]],spatialReference:e.spatialReference}),G)}visualizeParallelSign(t,e){return this._visualizeSnappingIndicator(new m.Z({paths:[[t.lineStart,t.lineEnd]],spatialReference:e.spatialReference}),C)}visualizeRightAngleQuad(t,e){return this._visualizeSnappingIndicator(new m.Z({paths:[[t.previousVertex,t.centerVertex,t.nextVertex]],spatialReference:e.spatialReference}),V(t))}_visualizeSnappingIndicator(t,e){const i=new s.Z({geometry:t,symbol:e});return this._graphicsLayer.add(i),(0,r.kB)((()=>{this._graphicsLayer.remove(i)}))}}const f=l.O.main.toArray(),x=[...l.O.main.toRgb(),100],b=new y.Z({outline:new v.Z({width:1.5,color:f}),size:15,color:[0,0,0,0]}),w=new y.Z({outline:{width:.5,color:[0,0,0,1]},size:10,color:f}),G=new u.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:c.kP.Butt,joinStyle:c.r4.Round,miterLimit:10,width:(0,o.Wz)(p.c.lineHintWidthTarget),color:f}]}}}),C=new u.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:f}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:f}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),M=t=>new u.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,o.Wz)(p.c.rightAngleHintSize),rotation:t,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,o.Wz)(p.c.rightAngleHintOutlineSize),color:f},{type:"CIMSolidFill",enable:!0,color:x}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),k=M(45),S=M(225),V=(()=>{const t=(0,a.a)(),e=(0,a.a)(),i=(0,h.c)();return s=>((0,n.a)(t,s.centerVertex,s.previousVertex),(0,n.a)(e,s.nextVertex,s.previousVertex),(0,n.g)(i,t,e),i[2]<0?k:S)})()},96888:(t,e,i)=>{i.r(e),i.d(e,{default:()=>P});var s=i(36663),r=(i(4905),i(31355)),o=i(44584),n=i(67134),a=i(61681),h=i(76868),c=i(81977),l=(i(7283),i(40266)),p=i(45857),d=i(50749),y=i(79523),v=i(8365);class u{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-click"}}class g{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-double-click"}}class m{constructor(t,e,i,s,r,o,n,a,h,c){this.graphic=t,this.allGraphics=e,this.index=i,this.x=s,this.y=r,this.dx=o,this.dy=n,this.totalDx=a,this.totalDy=h,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class _{constructor(t,e,i,s,r,o,n,a,h,c){this.graphic=t,this.allGraphics=e,this.index=i,this.x=s,this.y=r,this.dx=o,this.dy=n,this.totalDx=a,this.totalDy=h,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class f{constructor(t,e,i,s,r,o,n,a,h,c){this.graphic=t,this.allGraphics=e,this.index=i,this.x=s,this.y=r,this.dx=o,this.dy=n,this.totalDx=a,this.totalDy=h,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class x{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-over"}}class b{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-out"}}class w{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-down"}}class G{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-up"}}var C=i(97737),M=i(4641),k=i(38114),S=i(1759),V=i(15498),I=i(43411);const O="indicator-symbols";let E=class extends r.Z.EventedAccessor{constructor(t){super(t),this._activeGraphic=null,this._dragEvent=null,this._handles=new o.Z,this._hoverGraphic=null,this._indicators=[],this._initialDragGeometry=null,this._viewHandles=new o.Z,this._manipulators=[],this._layerViews=null,this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.indicatorsEnabled=!1,this.layer=new p.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),this.view=null}initialize(){(0,v.p)(this.view,this.layer),this._highlightHelper=new y.Z({view:this.view}),this.refresh(),this._handles.add([(0,h.YP)((()=>[this.graphics,this.graphics?.length]),(()=>this.refresh())),(0,h.gx)((()=>this.view?.ready),(()=>{this._viewHandles.add([this.view.on("immediate-click",(t=>this._clickHandler(t)),C.f.TOOL),this.view.on("double-click",(t=>this._doubleClickHandler(t)),C.f.TOOL),this.view.on("pointer-down",(t=>this._pointerDownHandler(t)),C.f.TOOL),this.view.on("pointer-move",(t=>this._pointerMoveHandler(t)),C.f.TOOL),this.view.on("pointer-up",(t=>this._pointerUpHandler(t)),C.f.TOOL),this.view.on("drag",(t=>this._dragHandler(t)),C.f.TOOL),this.view.on("key-down",(t=>this._keyDownHandler(t)),C.f.TOOL)])}),{once:!0,initial:!0}),(0,h.YP)((()=>this.view),(t=>{this._highlightHelper.removeAll(),this._highlightHelper.view=t}))])}destroy(){this._removeIndicators(),this.view.map?.remove(this.layer),this.layer.destroy(),this.reset(),this._manipulators.forEach((t=>t.destroy())),this._manipulators=null,this._handles=(0,a.SC)(this._handles),this._viewHandles=(0,a.SC)(this._viewHandles)}set highlightsEnabled(t){this._highlightHelper?.removeAll(),this._set("highlightsEnabled",t),t&&this._highlightHelper?.add(this.graphics)}get state(){const t=!!this.get("view.ready"),e=!!this.get("graphics.length"),i=this._activeGraphic;return t&&e?i?"moving":"active":t?"ready":"disabled"}refresh(){this.reset(),this._setup()}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null,this._highlightHelper.removeAll()}updateGeometry(t,e){const i=this.graphics[t];i&&(i.set("geometry",e),this._setUpIndicators())}_setup(){this._setUpHighlights(),this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}_clickHandler(t){const e=this._findTargetGraphic((0,k.vT)(t));if(e){const i=new u(e,this.graphics.indexOf(e),t.x,t.y,t);this.emit("graphic-click",i),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(i)}}_doubleClickHandler(t){const e=this._findTargetGraphic((0,k.vT)(t));if(e){const i=new g(e,this.graphics.indexOf(e),t.x,t.y,t);this.emit("graphic-double-click",i),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(i)}}_pointerDownHandler(t){const e=this._findTargetGraphic((0,k.vT)(t));if(e){this._activeGraphic=e;const{x:i,y:s}=t,r=new w(e,this.graphics.indexOf(e),i,s,t);this.emit("graphic-pointer-down",r),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(r)}else this._activeGraphic=null}_pointerUpHandler(t){if(this._activeGraphic){const{x:e,y:i}=t,s=this.graphics.indexOf(this._activeGraphic),r=new G(this._activeGraphic,s,e,i,t);this.emit("graphic-pointer-up",r),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(r)}}_pointerMoveHandler(t){if(this._dragEvent)return;const e=this._findTargetGraphic((0,k.vT)(t));if(e){const{x:i,y:s}=t;if(this._hoverGraphic){if(this._hoverGraphic===e)return;const r=this.graphics.indexOf(this._hoverGraphic),o=new b(this.graphics[r],r,i,s,t);this._hoverGraphic=null,this.emit("graphic-pointer-out",o),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(o)}const r=this.graphics.indexOf(e),o=new x(e,r,i,s,t);return this._hoverGraphic=e,this.emit("graphic-pointer-over",o),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(o))}if(this._hoverGraphic){const{x:e,y:i}=t,s=this.graphics.indexOf(this._hoverGraphic),r=new b(this.graphics[s],s,e,i,t);this._hoverGraphic=null,this.emit("graphic-pointer-out",r),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(r)}}_dragHandler(t){if("start"!==t.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;"start"===t.action&&this._removeIndicators(),t.stopPropagation();const{action:e,x:i,y:s}=t,r=this.graphics.indexOf(this._activeGraphic),o=this._dragEvent?i-this._dragEvent.x:0,a=this._dragEvent?s-this._dragEvent.y:0,h=i-t.origin.x,c=s-t.origin.y,l="start"===e?this._activeGraphic.geometry:this._initialDragGeometry,p=(0,d.e7)(l,h,c,this.view);if(this._activeGraphic.geometry=p,this.enableMoveAllGraphics&&this.graphics.forEach((t=>{t!==this._activeGraphic&&(t.geometry=(0,d.e7)(t.geometry,o,a,this.view))})),this._dragEvent=t,"start"===e){this._initialDragGeometry=(0,n.d9)(l);const e=new m(this._activeGraphic,this.graphics,r,i,s,o,a,h,c,t);this.emit("graphic-move-start",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set("geometry",l)}else if("update"===e){const e=new _(this._activeGraphic,this.graphics,r,i,s,o,a,h,c,t);this.emit("graphic-move",e),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(e),e.defaultPrevented&&(this._activeGraphic.geometry=l)}else{const e=new f(this._activeGraphic,this.graphics,r,i,s,o,a,h,c,t);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",e),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(e),e.defaultPrevented&&(this.graphics[r].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}_keyDownHandler(t){"a"!==t.key&&"d"!==t.key&&"n"!==t.key||"moving"!==this.state||t.stopPropagation()}_findTargetGraphic(t){const e=this.view.toMap(t);let i=null,s=Number.MAX_VALUE;this._syncLayerViews();const r=this._layerViews.flatMap((t=>"graphicsViews"in t?Array.from(t.graphicsViews(),(t=>t.hitTest(e))).flat():t.graphicsView.hitTest(e))).filter((t=>this.graphics.includes(t)));return r.length?r[0]:(this._manipulators.forEach((e=>{const r=e.intersectionDistance(t);(0,a.pC)(r)&&r<s&&(s=r,i=e.graphic)})),i)}_syncLayerViews(){this._layerViews=[];const t=new Set;for(const e of this.graphics){const i=(0,v.j)(this.view,e.layer);i&&t.add(i)}this._layerViews=[...t]}_setUpManipulators(){const{graphics:t,view:e}=this;this._manipulators.forEach((t=>t.destroy())),this._manipulators=t?.length?t.map((t=>new M.L({graphic:t,view:e}))):[]}_setUpHighlights(){this.highlightsEnabled&&this._highlightHelper.add(this.graphics)}_setUpIndicators(){if(this._removeIndicators(),this.indicatorsEnabled){for(const t of this.graphics){const e=t.clone();e.symbol=this._getSymbolForIndicator(t),this._indicators.push(e),this._handles.add((0,h.YP)((()=>t.symbol),(()=>this._setUpIndicators())),O)}this.layer.addMany(this._indicators)}}_removeIndicators(){this._handles.remove(O),this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach((t=>t.destroy())),this._indicators=[])}_getSymbolForIndicator(t){if((0,a.Wi)(t.symbol))return null;switch(t.symbol.type){case"cim":return new S.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:e,yoffset:i,height:s,width:r}=t.symbol,o=s===r?r:Math.max(s,r);return new S.Z({xoffset:e,yoffset:i,size:o,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:e,yoffset:i,size:s,style:r}=t.symbol;return new S.Z({xoffset:e,yoffset:i,style:"circle"===r?"circle":"square",size:s+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new I.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new V.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:e,yoffset:i}=t.symbol;return new S.Z({xoffset:e,yoffset:i,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}};(0,s._)([(0,c.Cb)()],E.prototype,"_activeGraphic",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],E.prototype,"callbacks",void 0),(0,s._)([(0,c.Cb)()],E.prototype,"enableMoveAllGraphics",void 0),(0,s._)([(0,c.Cb)()],E.prototype,"graphics",void 0),(0,s._)([(0,c.Cb)({value:!1})],E.prototype,"highlightsEnabled",null),(0,s._)([(0,c.Cb)()],E.prototype,"indicatorsEnabled",void 0),(0,s._)([(0,c.Cb)()],E.prototype,"layer",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"state",null),(0,s._)([(0,c.Cb)()],E.prototype,"view",void 0),E=(0,s._)([(0,l.j)("esri.views.draw.support.GraphicMover")],E);const P=E},79523:(t,e,i)=>{i.d(e,{Z:()=>l});var s=i(36663),r=i(53280),o=i(81977),n=(i(7283),i(7753),i(40266)),a=i(8365),h=i(42780);let c=class extends r.r{constructor(t){super(t),this.view=null}get count(){return this.handles.size}add(t){const e=Array.isArray(t)?t:[t];null!=t&&e&&e.length&&e.forEach((t=>this._highlight(t)))}remove(t){const e=Array.isArray(t)?t:[t];null!=t&&e&&e.length&&e.forEach((t=>this._unhighlight(t)))}removeAll(){this.handles.removeAll()}_highlight(t){const e=(0,a.j)(this.view,t.layer);(0,h.tl)(e)&&this.handles.add(e.highlight(t),`feature-${t.getObjectId()}`)}_unhighlight(t){t&&this.handles.remove(`feature-${t.getObjectId()}`)}};(0,s._)([(0,o.Cb)({readOnly:!0})],c.prototype,"count",null),(0,s._)([(0,o.Cb)()],c.prototype,"view",void 0),(0,s._)([(0,o.Cb)()],c.prototype,"add",null),c=(0,s._)([(0,n.j)("esri.views.draw.support.HighlightHelper")],c);const l=c},71123:(t,e,i)=>{i.r(e),i.d(e,{default:()=>$});var s=i(36663),r=(i(91957),i(80085)),o=i(67979),n=i(41831),a=i(70375),h=i(31355),c=i(44584),l=i(13802),p=i(61681),d=i(39405),y=i(76868),v=i(95550),u=i(81977),g=(i(7283),i(7753),i(40266)),m=i(38028),_=i(45857),f=i(1759),x=i(65684),b=i(36609),w=i(50749),G=i(96888),C=i(79523),M=i(8365),k=i(55444),S=i(97737),V=i(41775),I=i(62177),O=i(35329),E=i(73080),P=i(60333),T=i(60389),Z=i(34541),H=i(54682),z=i(90819),R=i(67666);class L{constructor(t,e,i){this.graphic=t,this.mover=e,this.selected=i,this.type="reshape-start"}}class A{constructor(t,e,i){this.graphic=t,this.mover=e,this.selected=i,this.type="reshape"}}class U{constructor(t,e,i){this.graphic=t,this.mover=e,this.selected=i,this.type="reshape-stop"}}class D{constructor(t,e,i){this.mover=t,this.dx=e,this.dy=i,this.type="move-start"}}class F{constructor(t,e,i){this.mover=t,this.dx=e,this.dy=i,this.type="move"}}class W{constructor(t,e,i){this.mover=t,this.dx=e,this.dy=i,this.type="move-stop"}}class j{constructor(t){this.added=t,this.type="vertex-select"}}class q{constructor(t){this.removed=t,this.type="vertex-deselect"}}class X{constructor(t,e,i,s){this.added=t,this.graphic=e,this.oldGraphic=i,this.vertices=s,this.type="vertex-add"}}class Y{constructor(t,e,i,s){this.removed=t,this.graphic=e,this.oldGraphic=i,this.vertices=s,this.type="vertex-remove"}}const N=k.X.reshapeGraphics,B={vertices:{default:new f.Z({style:"circle",size:N.vertex.size,color:N.vertex.color,outline:{color:N.vertex.outlineColor,width:1}}),hover:new f.Z({style:"circle",size:N.vertex.hoverSize,color:N.vertex.hoverColor,outline:{color:N.vertex.hoverOutlineColor,width:1}}),selected:new f.Z({style:"circle",size:N.selected.size,color:N.selected.color,outline:{color:N.selected.outlineColor,width:1}})},midpoints:{default:new f.Z({style:"circle",size:N.midpoint.size,color:N.midpoint.color,outline:{color:N.midpoint.outlineColor,width:1}}),hover:new f.Z({style:"circle",size:N.midpoint.size,color:N.midpoint.color,outline:{color:N.midpoint.outlineColor,width:1}})}};let Q=class extends h.Z.EventedAccessor{constructor(t){super(t),this._activeOperationInfo=null,this._editGeometryOperations=null,this._handles=new c.Z,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._snappingContext=null,this._snappingTask=null,this._stagedVertex=null,this._tooltip=null,this._viewHandles=new c.Z,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.enableMovement=!0,this.enableVertices=!0,this.graphic=null,this.layer=null,this.midpointGraphics=new n.Z,this.midpointSymbol=new f.Z({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedVertices=[],this.snappingManager=null,this.tooltipOptions=new O.Z,this.type="reshape",this.vertexGraphics=new n.Z,this.view=null}initialize(){const t=this.view;this._highlightHelper=new C.Z({view:t}),this._setup(),this._handles.add([(0,y.gx)((()=>t?.ready),(()=>{const{layer:t,view:e}=this;(0,M.p)(e,t),this._viewHandles.add(e.on("key-down",(t=>this._keyDownHandler(t)),S.f.TOOL))}),{once:!0,initial:!0}),(0,y.Wy)((()=>this.graphic),(()=>this.refresh())),(0,y.Wy)((()=>this.layer),((t,e)=>{e&&(this._clearSelection(),this._resetGraphics(e)),this.refresh()})),(0,y.Wy)((()=>this.enableMidpoints),(()=>this.refresh())),(0,y.YP)((()=>this.tooltipOptions.enabled),(t=>{this._tooltip=t?new P.u({view:this.view}):(0,p.SC)(this._tooltip)}),y.tX)])}destroy(){this._reset(),this._mover?.destroy(),this._mover=null,this._tooltip=(0,p.SC)(this._tooltip),this._handles=(0,p.SC)(this._handles),this._viewHandles=(0,p.SC)(this._viewHandles)}set highlightsEnabled(t){this._highlightHelper?.removeAll(),this._set("highlightsEnabled",t),this._setUpHighlights()}get state(){const t=!!this.get("view.ready"),e=!(!this.get("graphic")||!this.get("layer"));return t&&e?"active":t?"ready":"disabled"}set symbols(t){const{midpoints:e=B.midpoints,vertices:i=B.vertices}=t||{};this._set("symbols",{midpoints:e,vertices:i})}isUIGraphic(t){const e=[];return this.graphic&&e.push(this.graphic),e.concat(this.vertexGraphics.items,this.midpointGraphics.items),e.length>0&&e.includes(t)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedVertices(){this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_setup(){const{graphic:t,layer:e}=this;if(!e||!t||(0,p.Wi)(t.geometry))return;const i=t.geometry;"mesh"!==i.type&&"extent"!==i.type?("polygon"===i.type&&(0,m.pW)(i),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()}_setUpHighlights(){this.highlightsEnabled&&this.graphic&&this._highlightHelper.add(this.graphic)}_setUpGeometryHelper(){const t=this.graphic.geometry;if((0,p.Wi)(t)||"mesh"===t.type||"extent"===t.type)return void this._logGeometryTypeError();const e="multipoint"===t.type?new z.Z({paths:t.points,spatialReference:t.spatialReference}):t;this._editGeometryOperations=I.c.fromGeometry(e,x.JY.Local)}_saveSnappingContextForHandle(t,e){this._snappingGraphicsLayer=new _.Z({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer),this._snappingContext=new E.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:e.viewEvent?.pointerType||"mouse",excludeFeature:this.graphic,visualizer:new b.r(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(t)})}_reset(){this._clearSelection(),this._highlightHelper.removeAll(),this._updateTooltip(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetSnappingStateVars(){(0,p.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),(0,p.pC)(this._snappingGraphicsLayer)&&(this.view?.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=(0,p.SC)(this._editGeometryOperations),this._snappingTask=(0,p.IM)(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphics(t){this._removeMidpointGraphics(t),this._removeVertexGraphics(t),this._set("selectedVertices",[])}_removeMidpointGraphics(t){const e=t||this.layer;e&&e.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach((t=>t.destroy())),this.midpointGraphics.removeAll()}_removeVertexGraphics(t){const e=t||this.layer;e&&e.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach((t=>t.destroy())),this.vertexGraphics.removeAll()}_getCoordinatesForUI(t){const e=(0,m.nA)(t.clone());if("polygon"===t.type)for(const t of e){const e=t[t.length-1];t[0][0]===e[0]&&t[0][1]===e[1]&&t.length>2&&t.pop()}return e}_setupGraphics(){const t=this.graphic.geometry;if((0,p.pC)(t)&&("polyline"===t.type||"polygon"===t.type)){const e=this._getCoordinatesForUI(t);this.enableMidpoints&&this._setUpMidpointGraphics(e),this.enableVertices&&this._setUpVertexGraphics(e)}}_setUpMidpointGraphics(t){this._removeMidpointGraphics();const e=this._createMidpointGraphics(t);this.midpointGraphics.addMany(e),this.layer.addMany(e)}_setUpVertexGraphics(t){this._removeVertexGraphics();const e=this._createVertexGraphics(t);this.vertexGraphics.addMany(e),this._storeRelatedVertexIndices(),this.layer.addMany(e)}_createVertexGraphics(t){const{_graphicAttributes:e,symbols:i,view:{spatialReference:s}}=this,o=[];return t?.forEach(((t,n)=>{t.forEach(((t,a)=>{const[h,c]=t;o.push(new r.Z({geometry:new R.Z({x:h,y:c,spatialReference:s}),symbol:i?.vertices?.default,attributes:{...e,pathIndex:n,pointIndex:a}}))}))})),o}_createMidpointGraphics(t){const{_graphicAttributes:e,symbols:i,view:{spatialReference:s}}=this,o=[];return t?.forEach(((t,n)=>{t.forEach(((a,h)=>{const[c,l]=a,d=t[h+1]?h+1:0;if("polygon"===(0,p.U2)(this.graphic.geometry,"type")||0!==d){const[a,p]=t[d],[y,v]=(0,m.Gi)([c,l],[a,p]);o.push(new r.Z({geometry:new R.Z({x:y,y:v,spatialReference:s}),symbol:i.midpoints.default,attributes:{...e,pathIndex:n,pointIndexStart:h,pointIndexEnd:d}}))}}))})),o}_storeRelatedVertexIndices(){const t=this.vertexGraphics.items;if(!t)return;const e=t.map((({geometry:t})=>({x:t.x,y:t.y})));for(let i=0;i<e.length;i++){const s=[];for(let t=0;t<e.length;t++){if(i===t)continue;const r=e[i],o=e[t];r.x===o.x&&r.y===o.y&&s.push(t)}t[i].attributes.relatedGraphicIndices=s}}_setupMover(){const{enableMovement:t,graphic:e,midpointGraphics:i,vertexGraphics:s,view:r}=this,o=s.concat(i).items;t&&o.push(e),this._mover=new G.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:o,view:r,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_onGraphicClickCallback(t){t.viewEvent.stopPropagation();const e=t.graphic;if(e===this.graphic)this.clearSelection(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t);else if(this._isMidpoint(e)){if(2===t.viewEvent.button)return;const i=this.graphic.clone(),s=this._createVertexFromMidpoint(e);this.refresh(),this._emitVertexAddEvent([e],i,s)}else this._isVertex(e)&&(t.viewEvent.stopPropagation(),2===t.viewEvent.button?this._removeVertices(e):(t.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(e)?this._removeFromSelection(e,!0):this._addToSelection(e)))}_setUpOperation(t){const{graphic:e,dx:i,dy:s}=t,r=e===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(e,t),this._activeOperationInfo={target:this.graphic,mover:e,operationType:r?"move":"reshape",totalDx:i,totalDy:s}}_onGraphicMoveStartCallback(t){const{dx:e,dy:i,graphic:s}=t;if(s===this.graphic){const{geometry:r}=s;return this._setUpOperation(t),this._emitMoveStartEvent(e,i),void((0,p.pC)(r)&&"point"===r.type&&this._onHandleMove(s,e,i,t,(()=>{this._updateTooltip(this.graphic,t.viewEvent),this._emitMoveEvent(e,i)})))}if(!this.selectedVertices.includes(s)){if(this._clearSelection(),this._isMidpoint(s)){const t=this.graphic.clone(),e=this._createVertexFromMidpoint(s);this._emitVertexAddEvent([s],t,e)}this._addToSelection(s)}this._setUpOperation(t),this._emitReshapeStartEvent(s),this._onHandleMove(s,e,i,t,(()=>{this._updateTooltip(s,t.viewEvent),this._emitReshapeEvent(s)}))}_onGraphicMoveCallback(t){const e=this._activeOperationInfo;if(!e)return;const{dx:i,dy:s,graphic:r}=t;e.totalDx+=i,e.totalDy+=s;const{operationType:o}=e,{geometry:n}=r;if(!(0,p.Wi)(n))if("move"!==o)this._onHandleMove(r,i,s,t,(()=>{this._updateTooltip(r,t.viewEvent),this._emitReshapeEvent(r)}));else if("point"===n.type)this._onHandleMove(r,i,s,t,(()=>{this._updateTooltip(this.graphic,t.viewEvent),this._emitMoveEvent(i,s)}));else if("polyline"===n.type||"polygon"===n.type){const e=this._getCoordinatesForUI(n);this._updateVertexGraphicLocations(e),this._updateTooltip(this.graphic,t.viewEvent),this._emitMoveEvent(i,s)}}_onGraphicMoveStopCallback(t){const e=this._activeOperationInfo;if(!e)return;const{dx:i,dy:s,graphic:r}=t,{operationType:o}=e;e.totalDx+=i,e.totalDy+=s,this._onHandleMove(r,i,s,t,(()=>"move"===o?this._emitMoveStopEvent():this._emitReshapeStopEvent(r))),this._isMidpoint(r)?this.refresh():(this._updateTooltip(this._isVertex(r)?r:null),this._resetSnappingStateVars(),this._activeOperationInfo=null)}_updateVertexGraphicLocations(t){const e=this.view.spatialReference;for(const i of this.vertexGraphics){const{pathIndex:s,pointIndex:r}=i.attributes,[o,n]=t[s][r];i.geometry=new R.Z({x:o,y:n,spatialReference:e})}this._updateMidpointGraphicLocations(t)}_updateMidpointGraphicLocations(t){for(const e of this.midpointGraphics){const{pathIndex:i,pointIndexStart:s,pointIndexEnd:r}=e.attributes,[o,n]=t[i][s],[a,h]=t[i][r],[c,l]=(0,m.Gi)([o,n],[a,h]);e.geometry=new R.Z({x:c,y:l,spatialReference:this.view.spatialReference})}}_getIndicesForVertexGraphic({attributes:t}){return[t?.pathIndex||0,t?.pointIndex||0]}_getVertexFromEditGeometry(t){const[e,i]=this._getIndicesForVertexGraphic(t);return this._editGeometryOperations.data.components[e].vertices[i]}_onHandleMove(t,e,i,s,r){(0,p.IM)(this._snappingTask);const n=this._snappingContext;if(!n)return;const a=t.geometry,h="graphic-move-stop"===s.type;if((0,p.pC)(this.snappingManager)&&this.selectedVertices.length<2&&!h){const s=this.snappingManager;this._stagedVertex=s.update({point:a,context:n}),this._syncGeometryAfterVertexMove(t,new R.Z(this._stagedVertex),e,i,h),r(),this._snappingTask=(0,o.vr)((async o=>{const c=await s.snap({point:a,context:n,signal:o});c.valid&&(this._stagedVertex=c.apply(),this._syncGeometryAfterVertexMove(t,new R.Z(this._stagedVertex),e,i,h),r())}))}else{const s=(0,p.pC)(this._stagedVertex)?new R.Z(this._stagedVertex):a;this._syncGeometryAfterVertexMove(t,s,e,i,h),r()}}async _syncGeometryAfterVertexMove(t,e,i,s,r=!1){const o=this._editGeometryOperations.data.geometry;if("point"===o.type)t.geometry=e;else{const{x:n,y:a}=e,[h,c]=this._getIndicesForVertexGraphic(t);let l=(0,m.nA)(o);const p=l[h].length-1;l[h][c]=[n,a],"polygon"===o.type&&(0===c?l[h][p]=[n,a]:c===p&&(l[h][0]=[n,a])),this._isVertex(t)&&(l=this._moveRelatedCoordinates(l,t,n,a),l=this._moveSelectedHandleCoordinates(l,t,i,s,"polygon"===o.type),this._updateMidpointGraphicLocations(l)),this.graphic.geometry=o.clone();const d=this._getVertexFromEditGeometry(t),y=n-d.pos[0],v=a-d.pos[1];this._editGeometryOperations.moveVertices([d],y,v,0),r&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(t),e):t.geometry=e)}}_moveRelatedCoordinates(t,e,i,s){const{relatedGraphicIndices:r}=e.attributes;for(const o of r){const r=this.vertexGraphics.getItemAt(o),{pathIndex:n,pointIndex:a}=r.attributes;t[n][a]=[i,s],r.geometry=e.geometry}return t}_moveSelectedHandleCoordinates(t,e,i,s,r){for(const o of this.selectedVertices)if(o!==e){const{pathIndex:e,pointIndex:n,relatedGraphicIndices:a}=o.attributes,h=(0,w.e7)(o.geometry,i,s,this.view),c=t[e].length-1;t[e][n]=[h.x,h.y],o.geometry=h,r&&(0===n?t[e][c]=[h.x,h.y]:n===c&&(t[e][0]=[h.x,h.y]));for(const e of a){const i=this.vertexGraphics.getItemAt(e),{pathIndex:s,pointIndex:r}=i.attributes;t[s][r]=[h.x,h.y],i.geometry=h}}return t}_onGraphicPointerOverCallback(t){const e=t.graphic,i=this._isVertex(e);i&&!this._isSelected(e)&&(e.symbol=this.symbols.vertices.hover),this._updateTooltip(i?e:null),this._updateHoverCursor(e)}_onGraphicPointerOutCallback(t){const e=t.graphic;this._isVertex(e)&&!this._isSelected(e)&&(e.symbol=this.symbols.vertices.default),this.view.cursor="default",this._updateTooltip()}_createVertexFromMidpoint(t){const{_graphicAttributes:e,graphic:i}=this,s=i.geometry;if((0,p.Wi)(s)||"polygon"!==s.type&&"polyline"!==s.type)return[];const r=s.clone(),o=[],{pathIndex:n,pointIndexStart:a,pointIndexEnd:h}=t.attributes,{x:c,y:l}=t.geometry,d=0===h?a+1:h,y=(0,m.nA)(r);return y[n].splice(d,0,[c,l]),t.attributes={...e,pathIndex:n,pointIndex:d,relatedGraphicIndices:[]},o.push({coordinates:y[n][d],componentIndex:n,vertexIndex:d}),this.graphic.geometry=r,o}_addToSelection(t){t instanceof r.Z&&(t=[t]);for(const e of t)e.symbol=this.symbols.vertices.selected;this._set("selectedVertices",this.selectedVertices.concat(t)),this._emitSelectEvent(t)}_removeFromSelection(t,e){const{vertices:i}=this.symbols,s=e?i.hover:i.default;t instanceof r.Z&&(t=[t]);for(const e of t)this.selectedVertices.splice(this.selectedVertices.indexOf(e),1),this._set("selectedVertices",this.selectedVertices),e.set("symbol",s);this._emitDeselectEvent(t)}_clearSelection(){if(this.selectedVertices.length){const t=this.selectedVertices;for(const t of this.selectedVertices)t.set("symbol",this.symbols.vertices.default);this._set("selectedVertices",[]),this._emitDeselectEvent(t)}}_keyDownHandler(t){V.j.delete.includes(t.key)&&!t.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_removeVertices(t){const e=this.graphic.geometry;if((0,p.Wi)(e)||"polygon"!==e.type&&"polyline"!==e.type)return;if("polygon"===e.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;t instanceof r.Z&&(t=[t]);const i=this.graphic.clone(),s=e.clone();let o=(0,m.nA)(s);const n=[];t instanceof r.Z&&(t=[t]);for(const e of t){const{x:t,y:i}=e.geometry;for(let e=0;e<o.length;e++){const s=o[e];for(let r=0;r<s.length;r++){const[a,h]=s[r];t===a&&i===h&&(n.push({coordinates:o[e][r],componentIndex:e,vertexIndex:r}),o[e].splice(Number(r),1))}}}if("polygon"===s.type)o=o.filter((t=>{if(t.length<2)return!1;const[e,i]=t[0],[s,r]=t[t.length-1];return(2!==t.length||e!==s||i!==r)&&(e===s&&i===r||t.push(t[0]),!0)})),s.rings=o;else{for(const t of o)1===t.length&&o.splice(o.indexOf(t),1);s.paths=o}this.graphic.geometry=s,this.refresh(),this._emitVertexRemoveEvent(t,i,n)}_isVertex(t){return this.vertexGraphics.includes(t)}_isSelected(t){return this._isVertex(t)&&this.selectedVertices.includes(t)}_isMidpoint(t){return this.midpointGraphics.includes(t)}_updateHoverCursor(t){this.view.cursor=this._isMidpoint(t)?"copy":"move"}_updateTooltip(t,e){(0,p.Wi)(this._tooltip)||(t?t===this.graphic?this._updateMoveGraphicTooltip(e):this._updateMoveVertexTooltip(e):this._tooltip.clear())}_updateMoveGraphicTooltip(t){const{_tooltip:e,tooltipOptions:i,view:s}=this;if((0,p.Wi)(e))return;const r=new T.$E({tooltipOptions:i});if(t){const{x:e,y:i}=t.origin,o=s.toMap(t),n=s.toMap((0,v.vW)(e,i)),a=(0,H.Qw)(n,o);r.distance=(0,p.pC)(a)?a:d.yP}e.info=r}_updateMoveVertexTooltip(t){const{_tooltip:e,graphic:{geometry:i},tooltipOptions:s,view:r}=this;if((0,p.Wi)(e))return;const o=new T.nk({tooltipOptions:s});if((0,p.pC)(i)&&("polygon"===i.type?o.area=(0,Z.f)(i):"polyline"===i.type&&(o.totalLength=(0,H.C_)(i))),t){const{x:e,y:i}=t.origin,s=r.toMap(t),n=r.toMap((0,v.vW)(e,i)),a=(0,H.Qw)(n,s);o.distance=(0,p.pC)(a)?a:d.yP}e.info=o}_emitMoveStartEvent(t,e){const i=new D(this.graphic,t,e);this.emit("move-start",i),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(i)}_emitMoveEvent(t,e){const i=new F(this.graphic,t,e);this.emit("move",i),this.callbacks.onMove&&this.callbacks.onMove(i)}_emitMoveStopEvent(){const t=this._activeOperationInfo;if(!t)return;const{totalDx:e,totalDy:i}=t,s=new W(this.graphic,e,i);this.emit("move-stop",s),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(s)}_emitReshapeStartEvent(t){const e=new L(this.graphic,t,this.selectedVertices);this.emit("reshape-start",e),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(e)}_emitReshapeEvent(t){const e=new A(this.graphic,t,this.selectedVertices);this.emit("reshape",e),this.callbacks.onReshape&&this.callbacks.onReshape(e)}_emitReshapeStopEvent(t){const e=new U(this.graphic,t,this.selectedVertices);this.emit("reshape-stop",e),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(e)}_emitSelectEvent(t){const e=new j(t);this.emit("select",e),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(e)}_emitDeselectEvent(t){const e=new q(t);this.emit("deselect",e),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(e)}_emitVertexAddEvent(t,e,i){const s=new X(t,this.graphic,e,i);this.emit("vertex-add",s),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(s)}_emitVertexRemoveEvent(t,e,i){const s=new Y(t,this.graphic,e,i);this.emit("vertex-remove",s),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(s)}_logGeometryTypeError(){l.Z.getLogger(this.declaredClass).error(new a.Z("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))}};(0,s._)([(0,u.Cb)()],Q.prototype,"_tooltip",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"callbacks",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"enableMidpoints",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"enableMovement",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"enableVertices",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"graphic",void 0),(0,s._)([(0,u.Cb)({value:!0})],Q.prototype,"highlightsEnabled",null),(0,s._)([(0,u.Cb)()],Q.prototype,"layer",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],Q.prototype,"midpointGraphics",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"midpointSymbol",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],Q.prototype,"selectedVertices",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"snappingManager",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],Q.prototype,"state",null),(0,s._)([(0,u.Cb)({value:B})],Q.prototype,"symbols",null),(0,s._)([(0,u.Cb)({type:O.Z})],Q.prototype,"tooltipOptions",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],Q.prototype,"type",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],Q.prototype,"vertexGraphics",void 0),(0,s._)([(0,u.Cb)()],Q.prototype,"view",void 0),Q=(0,s._)([(0,g.j)("esri.views.draw.support.Reshape")],Q);const $=Q},50749:(t,e,i)=>{i.d(e,{Ru:()=>l,bA:()=>c,cM:()=>p,e7:()=>h,pB:()=>a});var s=i(19431),r=i(24568),o=i(79880),n=i(38028);function a(t,e,i,s){if(null==s||t.hasZ||(s=void 0),"point"===t.type)return t.x+=e,t.y+=i,t.hasZ&&null!=s&&(t.z+=s),t;if("multipoint"===t.type){const r=t.points;for(let t=0;t<r.length;t++)r[t]=d(r[t],e,i,s);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=i,t.ymax+=i,null!=s&&(t.zmin??(t.zmin=0),t.zmin+=s,t.zmax??(t.zmax=0),t.zmax+=s),t;const r=(0,n.nA)(t),o="polyline"===t.type?t.paths:t.rings;for(let t=0;t<r.length;t++){const o=r[t];for(let t=0;t<o.length;t++)o[t]=d(o[t],e,i,s)}return"paths"in t?t.paths=o:t.rings=o,t}function h(t,e,i,s,r){const o=t.clone(),h=s.resolution;if("point"===o.type){if(r)a(o,e*h,-i*h);else{const t=s.state.transform,r=s.state.inverseTransform,n=t[0]*o.x+t[2]*o.y+t[4],a=t[1]*o.x+t[3]*o.y+t[5];o.x=r[0]*(n+e)+r[2]*(a+i)+r[4],o.y=r[1]*(n+e)+r[3]*(a+i)+r[5]}return o}if("multipoint"===o.type){if(r)a(o,e*h,-i*h);else{const t=o.points,r=s.state.transform,n=s.state.inverseTransform;for(let s=0;s<t.length;s++){const o=t[s],a=r[0]*o[0]+r[2]*o[1]+r[4],h=r[1]*o[0]+r[3]*o[1]+r[5],c=n[0]*(a+e)+n[2]*(h+i)+n[4],l=n[1]*(a+e)+n[3]*(h+i)+n[5];t[s]=y(o,c,l,void 0)}}return o}if("extent"===o.type){if(r)a(o,e*h,-i*h);else{const t=s.state.transform,r=s.state.inverseTransform,n=t[0]*o.xmin+t[2]*o.ymin+t[4],a=t[1]*o.xmin+t[3]*o.ymin+t[5],h=t[0]*o.xmax+t[2]*o.ymax+t[4],c=t[1]*o.xmax+t[3]*o.ymax+t[5];o.xmin=r[0]*(n+e)+r[2]*(a+i)+r[4],o.ymin=r[1]*(n+e)+r[3]*(a+i)+r[5],o.xmax=r[0]*(h+e)+r[2]*(c+i)+r[4],o.ymax=r[1]*(h+e)+r[3]*(c+i)+r[5]}return o}if(r)a(o,e*h,-i*h);else{const t=(0,n.nA)(o),r="polyline"===o.type?o.paths:o.rings,a=s.state.transform,h=s.state.inverseTransform;for(let s=0;s<t.length;s++){const r=t[s];for(let t=0;t<r.length;t++){const s=r[t],o=a[0]*s[0]+a[2]*s[1]+a[4],n=a[1]*s[0]+a[3]*s[1]+a[5],c=h[0]*(o+e)+h[2]*(n+i)+h[4],l=h[1]*(o+e)+h[3]*(n+i)+h[5];r[t]=y(s,c,l,void 0)}}"paths"in o?o.paths=r:o.rings=r}return o}function c(t,e,i,s){if("point"===t.type){const{x:r,y:o}=t,n=s?s[0]:r,a=s?s[1]:o,h=t.clone(),c=(r-n)*e+n,l=(o-a)*i+a;return h.x=c,h.y=l,h}if("multipoint"===t.type){const a=(0,n.nA)(t),h=(0,r.Ue)(),[c,l,p,d]=(0,o.C6)(h,[a]),v=s?s[0]:(c+p)/2,u=s?s[1]:(d+l)/2,g=t.clone(),m=g.points;for(let t=0;t<m.length;t++){const s=m[t],[r,o]=s,n=(r-v)*e+v,a=(o-u)*i+u;m[t]=y(s,n,a,void 0)}return g}if("extent"===t.type){const{xmin:r,xmax:o,ymin:n,ymax:a}=t,h=s?s[0]:(r+o)/2,c=s?s[1]:(a+n)/2,l=t.clone();if(l.xmin=(r-h)*e+h,l.ymax=(a-c)*i+c,l.xmax=(o-h)*e+h,l.ymin=(n-c)*i+c,l.xmin>l.xmax){const t=l.xmin,e=l.xmax;l.xmin=e,l.xmax=t}if(l.ymin>l.ymax){const t=l.ymin,e=l.ymax;l.ymin=e,l.ymax=t}return l}const a=(0,n.nA)(t),h=(0,r.Ue)(),[c,l,p,d]=(0,o.C6)(h,a),v=s?s[0]:(c+p)/2,u=s?s[1]:(d+l)/2,g=t.clone(),m="polyline"===g.type?g.paths:g.rings;for(let t=0;t<a.length;t++){const s=a[t];for(let r=0;r<s.length;r++){const o=s[r],[n,a]=o,h=(n-v)*e+v,c=(a-u)*i+u;m[t][r]=y(o,h,c,void 0)}}return"paths"in g?g.paths=m:g.rings=m,g}function l(t,e,i,s,r,o){const n=Math.sqrt((i-t)*(i-t)+(s-e)*(s-e));return Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))/n}function p(t,e,i,r=!1){const o=Math.atan2(e.y-i.y,e.x-i.x)-Math.atan2(t.y-i.y,t.x-i.x),n=Math.atan2(Math.sin(o),Math.cos(o));return r?n:(0,s.BV)(n)}function d(t,e,i,s){return y(t,t[0]+e,t[1]+i,null!=t[2]&&null!=s?t[2]+s:void 0)}function y(t,e,i,s){const r=[e,i];return t.length>2&&r.push(null!=s?s:t[2]),t.length>3&&r.push(t[3]),r}},55444:(t,e,i)=>{i.d(e,{O:()=>r,X:()=>p});var s=i(30936);const r={main:new s.Z([255,127,0]),selected:new s.Z([255,255,255]),outline:new s.Z([0,0,0,.5]),selectedOutline:new s.Z([255,255,255]),hoverOutline:new s.Z([255,255,255]),secondary:new s.Z([255,255,255]),secondaryOutline:new s.Z([100,100,100]),transparent:new s.Z([0,0,0,0])};function o(t,e){if(e)for(const i in e)t[i]=e[i]}class n{constructor(t){this.size=8,this.hoverSize=10,this.color=r.main,this.hoverColor=r.main,this.outlineColor=r.outline,this.hoverOutlineColor=r.hoverOutline,o(this,t)}}class a{constructor(t){this.color=r.secondary,this.hoverColor=r.main,o(this,t)}}class h{constructor(t){this.color=r.transparent,this.hoverColor=r.transparent,this.outlineColor=r.main,this.hoverOutlineColor=r.main,this.stagedColor=r.transparent,this.stagedOutlineColor=r.secondary,o(this,t)}}class c{constructor(t){this.vertex=new n,this.midpoint=new n({color:r.secondary,outlineColor:r.secondaryOutline,size:6}),this.selected=new n({color:r.selected,hoverColor:r.selected,hoverOutlineColor:r.hoverOutline}),o(this,t)}}class l{constructor(t){this.center=new n({color:r.secondaryOutline}),this.fill=new h,this.line=new a,this.vertex=new n({color:r.selected,outlineColor:r.main,hoverColor:r.selected,hoverOutlineColor:r.secondaryOutline}),o(this,t)}}const p=new class{constructor(t){this.reshapeGraphics=new c,this.transformGraphics=new l,o(this,t)}}},73080:(t,e,i)=>{i.d(e,{N:()=>s});class s{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},4371:(t,e,i)=>{i.d(e,{a:()=>c});var s=i(23148),r=i(59282),o=i(65453),n=i(23688),a=i(82366),h=i(31367);class c{draw(t,e){const i=this._getUniqueHints(t),c=this.sortUniqueHints(i),l=[];for(const t of c)t instanceof r.w&&l.push(this.visualizeIntersectionPoint(t,e)),t instanceof o.w&&l.push(this.visualizeLine(t,e)),t instanceof n.L&&l.push(this.visualizeParallelSign(t,e)),t instanceof h.y&&l.push(this.visualizeRightAngleQuad(t,e)),t instanceof a.n&&l.push(this.visualizePoint(t,e));return(0,s.AL)(l)}sortUniqueHints(t){return t}_getUniqueHints(t){const e=[];for(const i of t){let t=!0;for(const s of e)if(i.equals(s)){t=!1;break}t&&e.push(i)}return e}}},82366:(t,e,i)=>{i.d(e,{n:()=>o});var s=i(6766),r=i(9650);class o extends r.r{constructor(t,e,i){super(e,i),this.point=t}equals(t){return t instanceof o&&(0,s.k)(this.point,t.point)}}},60389:(t,e,i)=>{i.d(e,{$E:()=>h,QW:()=>c,c1:()=>y,in:()=>l,j:()=>d,nk:()=>p});var s=i(36663),r=i(39405),o=i(81977),n=i(40266),a=i(54079);let h=class extends a.h{constructor(t){super(t),this.type="translate-graphic",this.distance=r.yP}};(0,s._)([(0,o.Cb)()],h.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],h.prototype,"distance",void 0),h=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],h);let c=class extends a.h{constructor(t){super(t),this.type="translate-graphic-z",this.distance=r.yP}};(0,s._)([(0,o.Cb)()],c.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],c.prototype,"distance",void 0),c=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],c);let l=class extends a.h{constructor(t){super(t),this.type="translate-graphic-xy",this.distance=r.yP}};(0,s._)([(0,o.Cb)()],l.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],l.prototype,"distance",void 0),l=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],l);let p=class extends a.h{constructor(t){super(t),this.type="translate-vertex",this.distance=r.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,s._)([(0,o.Cb)()],p.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"distance",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"elevation",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"area",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"totalLength",void 0),p=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],p);let d=class extends a.h{constructor(t){super(t),this.type="translate-vertex-z",this.distance=r.yP,this.elevation=null}};(0,s._)([(0,o.Cb)()],d.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],d.prototype,"distance",void 0),(0,s._)([(0,o.Cb)()],d.prototype,"elevation",void 0),d=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],d);let y=class extends a.h{constructor(t){super(t),this.type="translate-vertex-xy",this.distance=r.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,s._)([(0,o.Cb)()],y.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],y.prototype,"distance",void 0),(0,s._)([(0,o.Cb)()],y.prototype,"elevation",void 0),(0,s._)([(0,o.Cb)()],y.prototype,"area",void 0),(0,s._)([(0,o.Cb)()],y.prototype,"totalLength",void 0),y=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],y)},34541:(t,e,i)=>{i.d(e,{f:()=>g,k:()=>u});var s=i(61681),r=i(95785),o=(i(91957),i(39405)),n=i(17700),a=i(90472),h=i(85130),c=i(27493),l=i(14685);function p(t){const{spatialReference:e}=t;return(0,c.T)(e,d,y,v,t)}function d(t){return(0,o.ne)(Math.abs((0,h.p8)([t],"square-meters")[0]),"square-meters")}function y(t){try{return(0,o.ne)(Math.abs((0,n.geodesicArea)(t,"square-meters")),"square-meters")}catch(t){return null}}function v(t){const e=[];return(0,a.K2)(t,e)?(0,o.ne)(Math.abs((0,h.p8)([{type:"polygon",rings:e,spatialReference:l.Z.WGS84}],"square-meters")[0]),"square-meters"):null}function u(t,e,i=(0,r.ln)()){if("on-the-ground"===e){const e=p(t);return(0,s.pC)(e)?e:(0,r.X)(t,i)}return(0,r.oN)(t,i)}function g(t,e=(0,r.ln)()){return u(t,"on-the-ground",e)}},95785:(t,e,i)=>{i.d(e,{X:()=>v,bT:()=>f,ln:()=>_,oN:()=>y});var s=i(61681),r=i(39405),o=i(17321),n=i(5992),a=i(6766),h=i(8909),c=i(90472),l=i(69430),p=i(42772),d=i(89976);function y(t,e={positionsWorldCoords:[]}){return u(t,e)}function v(t,e={positionsWorldCoords:[]}){return u(t,e,!1)}function u(t,e,i=t.hasZ){const n=(0,d.m)(t.spatialReference),y=(0,o.oq)(n);if((0,s.Wi)(y))return null;const v=(t,e)=>!(e.length<2||((0,a.s)(t,e[0],e[1],i&&e[2]||0),0));let u=0;for(const i of t.rings){const s=i.length;if(s<3)continue;const{positionsWorldCoords:r}=e;for(;r.length<s;)r.push((0,h.c)());const o=g,d=(0,a.s)(m,0,0,0),y=1/s;for(let e=0;e<s;e++){if(!v(o,i[e]))return null;if(!(0,c.SH)(o,t.spatialReference,r[e],n))return null;(0,a.z)(d,d,r[e],y)}const _=(0,l.zk)(r[0],r[1],d,(0,l.re)());if(0===(0,a.p)((0,l.mJ)(_)))continue;for(let t=0;t<s;t++)(0,l.tx)(_,d,r[t],r[t]);const x=f(r);for(let t=0;t<x.length;t+=3)u+=(0,p.wu)(r[x[t]],r[x[t+1]],r[x[t+2]])}return(0,r.ne)(u,y)}const g=(0,h.c)(),m=(0,h.c)();function _(){return{positionsWorldCoords:[]}}function f(t){return(0,n.e)(function(t){const e=new Float64Array(2*t.length);for(let i=0;i<t.length;++i){const s=t[i],r=2*i;e[r+0]=s[0],e[r+1]=s[1]}return e}(t),[],2)}}}]);