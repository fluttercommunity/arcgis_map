"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[6427],{36609:(e,t,n)=>{n.d(t,{r:()=>g});n(91957);var i=n(80085),a=(n(4905),n(23148)),r=n(95550),s=n(55709),o=n(69666),l=n(8909),c=n(25609),p=n(55444),u=n(50639),h=n(4371),d=n(1759),m=n(15498),y=n(62589),v=n(67666),f=n(90819);class g extends h.a{constructor(e){super(),this._graphicsLayer=e}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new v.Z({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),x)}visualizePoint(e,t){return this._visualizeSnappingIndicator(new v.Z({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),C)}visualizeLine(e,t){return this._visualizeSnappingIndicator(new f.Z({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),S)}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new f.Z({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),w)}visualizeRightAngleQuad(e,t){return this._visualizeSnappingIndicator(new f.Z({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),z(e))}_visualizeSnappingIndicator(e,t){const n=new i.Z({geometry:e,symbol:t});return this._graphicsLayer.add(n),(0,a.kB)((()=>{this._graphicsLayer.remove(n)}))}}const b=p.O.main.toArray(),_=[...p.O.main.toRgb(),100],x=new d.Z({outline:new m.Z({width:1.5,color:b}),size:15,color:[0,0,0,0]}),C=new d.Z({outline:{width:.5,color:[0,0,0,1]},size:10,color:b}),S=new y.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:c.kP.Butt,joinStyle:c.r4.Round,miterLimit:10,width:(0,r.Wz)(u.c.lineHintWidthTarget),color:b}]}}}),w=new y.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:b}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:b}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),E=e=>new y.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,r.Wz)(u.c.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,r.Wz)(u.c.rightAngleHintOutlineSize),color:b},{type:"CIMSolidFill",enable:!0,color:_}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),M=E(45),P=E(225),z=(()=>{const e=(0,o.a)(),t=(0,o.a)(),n=(0,l.c)();return i=>((0,s.a)(e,i.centerVertex,i.previousVertex),(0,s.a)(t,i.nextVertex,i.previousVertex),(0,s.g)(n,e,t),n[2]<0?M:P)})()},45045:(e,t,n)=>{n.r(t),n.d(t,{DrawGraphicTool2D:()=>_});var i=n(36663),a=(n(91957),n(80085)),r=n(23148),s=n(61681),o=n(81977),l=(n(7753),n(7283),n(40266)),c=n(36609),p=(n(4905),n(62589)),u=n(1759);const h=new p.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),d=new u.Z({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),m=new u.Z({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});var y=n(86493),v=n(84703),f=n(15991),g=n(67666),b=n(74304);let _=class extends y.T{constructor(e){super(e),this._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:(0,s.Pt)(e.activeLineSymbol,h),regularVertices:(0,s.Pt)(e.regularVerticesSymbol,d),activeVertex:(0,s.Pt)(e.activeVertexSymbol,m),fill:(0,s.Wg)(e.activeFillSymbol)}}normalizeCtorArgs(e){const t={...e};return delete t.activeFillSymbol,delete t.activeVertexSymbol,delete t.regularVerticesSymbol,delete t.activeLineSymbol,t}initializeGraphic(e){return(0,s.pC)(this._visualElementSymbols.fill)&&(e.symbol=this._visualElementSymbols.fill),null}makeDrawOperation(){const{defaultZ:e,hasZ:t,view:n}=this;return new v.w({view:n,manipulators:this.manipulators,geometryType:(0,y.I)(this.geometryType),drawingMode:this.mode,hasZ:t,defaultZ:e,snapToSceneEnabled:this.snapToScene,drawSurface:new f.hP(n,t,e),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new c.r(this.internalGraphicsLayer),tooltipOptions:this.tooltipOptions})}onActiveVertexChanged(e){if("point"===this.geometryType)return null;const[t,n]=e,i=new g.Z({x:t,y:n,spatialReference:this.view.spatialReference});return(0,s.pC)(this._visualElementGraphics.activeVertex)?(this._visualElementGraphics.activeVertex.geometry=i,null):(this._visualElementGraphics.activeVertex=new a.Z({geometry:i,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(x),(0,r.kB)((()=>{(0,s.pC)(this._visualElementGraphics.activeVertex)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=(0,s.SC)(this._visualElementGraphics.activeVertex))})))}onOutlineChanged(e){const t=e.clone();if("polyline"===t.type){const e=t.paths[t.paths.length-1];e.splice(0,e.length-2)}return(0,s.pC)(this._visualElementGraphics.outline)?(this._visualElementGraphics.outline.geometry=t,null):(this._visualElementGraphics.outline=new a.Z({geometry:t,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.outline),this.internalGraphicsLayer.graphics.sort(x),(0,r.kB)((()=>{(0,s.pC)(this._visualElementGraphics.outline)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=(0,s.SC)(this._visualElementGraphics.outline))})))}onRegularVerticesChanged(e){const t=new b.Z({points:e,spatialReference:this.view.spatialReference});return(0,s.pC)(this._visualElementGraphics.regularVertices)?(this._visualElementGraphics.regularVertices.geometry=t,null):(this._visualElementGraphics.regularVertices=new a.Z({geometry:t,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(x),(0,r.kB)((()=>{(0,s.pC)(this._visualElementGraphics.regularVertices)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=(0,s.SC)(this._visualElementGraphics.regularVertices))})))}};function x(e,t){return(e.attributes?.displayOrder??-1/0)-(t.attributes?.displayOrder??-1/0)}(0,i._)([(0,o.Cb)()],_.prototype,"activeFillSymbol",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],_.prototype,"type",void 0),(0,i._)([(0,o.Cb)({constructOnly:!0,nonNullable:!0})],_.prototype,"view",void 0),_=(0,i._)([(0,l.j)("esri.views.2d.interactive.draw.DrawGraphicTool2D")],_)},50749:(e,t,n)=>{n.d(t,{Ru:()=>p,bA:()=>c,cM:()=>u,e7:()=>l,pB:()=>o});var i=n(19431),a=n(24568),r=n(79880),s=n(38028);function o(e,t,n,i){if(null==i||e.hasZ||(i=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=i&&(e.z+=i),e;if("multipoint"===e.type){const a=e.points;for(let e=0;e<a.length;e++)a[e]=h(a[e],t,n,i);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=i&&(e.zmin+=i,e.zmax+=i),e;const a=(0,s.nA)(e),r="polyline"===e.type?e.paths:e.rings;for(let e=0;e<a.length;e++){const r=a[e];for(let e=0;e<r.length;e++)r[e]=h(r[e],t,n,i)}return"paths"in e?e.paths=r:e.rings=r,e}function l(e,t,n,i,a){const r=e.clone(),l=i.resolution;if("point"===r.type){if(a)o(r,t*l,-n*l);else{const e=i.state.transform,a=i.state.inverseTransform,s=e[0]*r.x+e[2]*r.y+e[4],o=e[1]*r.x+e[3]*r.y+e[5];r.x=a[0]*(s+t)+a[2]*(o+n)+a[4],r.y=a[1]*(s+t)+a[3]*(o+n)+a[5]}return r}if("multipoint"===r.type){if(a)o(r,t*l,-n*l);else{const e=r.points,a=i.state.transform,s=i.state.inverseTransform;for(let i=0;i<e.length;i++){const r=e[i],o=a[0]*r[0]+a[2]*r[1]+a[4],l=a[1]*r[0]+a[3]*r[1]+a[5],c=s[0]*(o+t)+s[2]*(l+n)+s[4],p=s[1]*(o+t)+s[3]*(l+n)+s[5];e[i]=d(r,c,p,void 0)}}return r}if("extent"===r.type){if(a)o(r,t*l,-n*l);else{const e=i.state.transform,a=i.state.inverseTransform,s=e[0]*r.xmin+e[2]*r.ymin+e[4],o=e[1]*r.xmin+e[3]*r.ymin+e[5],l=e[0]*r.xmax+e[2]*r.ymax+e[4],c=e[1]*r.xmax+e[3]*r.ymax+e[5];r.xmin=a[0]*(s+t)+a[2]*(o+n)+a[4],r.ymin=a[1]*(s+t)+a[3]*(o+n)+a[5],r.xmax=a[0]*(l+t)+a[2]*(c+n)+a[4],r.ymax=a[1]*(l+t)+a[3]*(c+n)+a[5]}return r}if(a)o(r,t*l,-n*l);else{const e=(0,s.nA)(r),a="polyline"===r.type?r.paths:r.rings,o=i.state.transform,l=i.state.inverseTransform;for(let i=0;i<e.length;i++){const a=e[i];for(let e=0;e<a.length;e++){const i=a[e],r=o[0]*i[0]+o[2]*i[1]+o[4],s=o[1]*i[0]+o[3]*i[1]+o[5],c=l[0]*(r+t)+l[2]*(s+n)+l[4],p=l[1]*(r+t)+l[3]*(s+n)+l[5];a[e]=d(i,c,p,void 0)}}"paths"in r?r.paths=a:r.rings=a}return r}function c(e,t,n,i){if("point"===e.type){const{x:a,y:r}=e,s=i?i[0]:a,o=i?i[1]:r,l=e.clone(),c=(a-s)*t+s,p=(r-o)*n+o;return l.x=c,l.y=p,l}if("multipoint"===e.type){const o=(0,s.nA)(e),l=(0,a.Ue)(),[c,p,u,h]=(0,r.C6)(l,[o]),m=i?i[0]:(c+u)/2,y=i?i[1]:(h+p)/2,v=e.clone(),f=v.points;for(let e=0;e<f.length;e++){const i=f[e],[a,r]=i,s=(a-m)*t+m,o=(r-y)*n+y;f[e]=d(i,s,o,void 0)}return v}if("extent"===e.type){const{xmin:a,xmax:r,ymin:s,ymax:o}=e,l=i?i[0]:(a+r)/2,c=i?i[1]:(o+s)/2,p=e.clone();if(p.xmin=(a-l)*t+l,p.ymax=(o-c)*n+c,p.xmax=(r-l)*t+l,p.ymin=(s-c)*n+c,p.xmin>p.xmax){const e=p.xmin,t=p.xmax;p.xmin=t,p.xmax=e}if(p.ymin>p.ymax){const e=p.ymin,t=p.ymax;p.ymin=t,p.ymax=e}return p}const o=(0,s.nA)(e),l=(0,a.Ue)(),[c,p,u,h]=(0,r.C6)(l,o),m=i?i[0]:(c+u)/2,y=i?i[1]:(h+p)/2,v=e.clone(),f="polyline"===v.type?v.paths:v.rings;for(let e=0;e<o.length;e++){const i=o[e];for(let a=0;a<i.length;a++){const r=i[a],[s,o]=r,l=(s-m)*t+m,c=(o-y)*n+y;f[e][a]=d(r,l,c,void 0)}}return"paths"in v?v.paths=f:v.rings=f,v}function p(e,t,n,i,a,r){const s=Math.sqrt((n-e)*(n-e)+(i-t)*(i-t));return Math.sqrt((a-e)*(a-e)+(r-t)*(r-t))/s}function u(e,t,n){const a=Math.atan2(t.y-n.y,t.x-n.x)-Math.atan2(e.y-n.y,e.x-n.x),r=Math.atan2(Math.sin(a),Math.cos(a));return(0,i.BV)(r)}function h(e,t,n,i){return d(e,e[0]+t,e[1]+n,null!=e[2]&&null!=i?e[2]+i:void 0)}function d(e,t,n,i){const a=[t,n];return e.length>2&&a.push(null!=i?i:e[2]),e.length>3&&a.push(e[3]),a}},55444:(e,t,n)=>{n.d(t,{O:()=>a,X:()=>u});var i=n(30936);const a={main:new i.Z([255,127,0]),selected:new i.Z([255,255,255]),outline:new i.Z([0,0,0,.5]),selectedOutline:new i.Z([255,255,255]),hoverOutline:new i.Z([255,255,255]),secondary:new i.Z([255,255,255]),secondaryOutline:new i.Z([100,100,100]),transparent:new i.Z([0,0,0,0])};function r(e,t){if(t)for(const n in t)e[n]=t[n]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=a.main,this.hoverColor=a.main,this.outlineColor=a.outline,this.hoverOutlineColor=a.hoverOutline,r(this,e)}}class o{constructor(e){this.color=a.secondary,this.hoverColor=a.main,r(this,e)}}class l{constructor(e){this.color=a.transparent,this.hoverColor=a.transparent,this.outlineColor=a.main,this.hoverOutlineColor=a.main,this.stagedColor=a.transparent,this.stagedOutlineColor=a.secondary,r(this,e)}}class c{constructor(e){this.vertex=new s,this.midpoint=new s({color:a.secondary,outlineColor:a.secondaryOutline,size:6}),this.selected=new s({color:a.selected,hoverColor:a.selected,hoverOutlineColor:a.hoverOutline}),r(this,e)}}class p{constructor(e){this.center=new s({color:a.secondaryOutline}),this.fill=new l,this.line=new o,this.vertex=new s({color:a.selected,outlineColor:a.main,hoverColor:a.selected,hoverOutlineColor:a.secondaryOutline}),r(this,e)}}const u=new class{constructor(e){this.reshapeGraphics=new c,this.transformGraphics=new p,r(this,e)}}},68610:(e,t,n)=>{n.d(t,{m:()=>m});var i,a=n(36663),r=n(53443),s=n(13802),o=n(61681),l=n(78668),c=n(81977),p=(n(7753),n(7283),n(40266)),u=n(91258),h=n(41831);!function(e){e[e.WhenToolEditable=0]="WhenToolEditable",e[e.WhenToolNotEditable=1]="WhenToolNotEditable",e[e.Always=2]="Always"}(i||(i={}));class d{constructor(){this._isToolEditable=!0,this._manipulators=new h.Z,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=i.WhenToolEditable){this.addMany([e],t)}addMany(e,t=i.WhenToolEditable){for(const n of e){const e={manipulator:n,visibilityPredicate:t,attached:!1};this._manipulators.add(e),this._attached&&this._updateManipulatorAttachment(e)}}remove(e){for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.getItemAt(t).manipulator===e){const e=this._manipulators.splice(t,1)[0];this._detachManipulator(e);break}}removeAll(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((e=>{this._updateManipulatorAttachment(e)})),this._attached=!0}detach(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:e})=>{e.destroy&&e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,(e=>{t(e)}))}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach((t=>e.push(t.manipulator))),e}intersect(e,t){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:a,attached:r})=>{if(!r||!a.interactive)return;const s=a.intersectionDistance(e,t);(0,o.pC)(s)&&s<i&&(i=s,n=a)})),n}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===i.Always||(this._isToolEditable?e.visibilityPredicate===i.WhenToolEditable:e.visibilityPredicate===i.WhenToolNotEditable)}}let m=class extends r.Z{constructor(e){super(e),this.manipulators=new d,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[u.bH.MANAGER,!0],[u.bH.USER,!0]]),this._creationFinishedResolver=(0,l.hh)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(u.bH.USER)}set editable(e){this.setEditableFlag(u.bH.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){(0,o.Wi)(this.view)?s.Z.getLogger(this.declaredClass).error("Can't activate tool if view is not defined."):(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===u.bH.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(u.bH.USER)&&this.getEditableFlag(u.bH.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,a._)([(0,c.Cb)({constructOnly:!0})],m.prototype,"view",void 0),(0,a._)([(0,c.Cb)({readOnly:!0})],m.prototype,"active",null),(0,a._)([(0,c.Cb)({value:!0})],m.prototype,"visible",null),(0,a._)([(0,c.Cb)({value:!0})],m.prototype,"editable",null),(0,a._)([(0,c.Cb)({readOnly:!0})],m.prototype,"manipulators",void 0),(0,a._)([(0,c.Cb)({readOnly:!0})],m.prototype,"updating",null),(0,a._)([(0,c.Cb)()],m.prototype,"cursor",null),(0,a._)([(0,c.Cb)({readOnly:!0})],m.prototype,"automaticManipulatorSelection",void 0),(0,a._)([(0,c.Cb)()],m.prototype,"hasFocusedManipulators",null),(0,a._)([(0,c.Cb)()],m.prototype,"hasGrabbedManipulators",void 0),(0,a._)([(0,c.Cb)()],m.prototype,"hasHoveredManipulators",void 0),(0,a._)([(0,c.Cb)()],m.prototype,"firstGrabbedManipulator",void 0),(0,a._)([(0,c.Cb)({readOnly:!0})],m.prototype,"created",void 0),(0,a._)([(0,c.Cb)({readOnly:!0})],m.prototype,"removeIncompleteOnCancel",void 0),m=(0,a._)([(0,p.j)("esri.views.interactive.InteractiveToolBase")],m)},76478:(e,t,n)=>{n.d(t,{AN:()=>C,BS:()=>M,M2:()=>y,QY:()=>x,Xd:()=>m,a9:()=>v,bD:()=>_,di:()=>b,hM:()=>E,kY:()=>w,oq:()=>g,zh:()=>S});n(91957);var i=n(67134),a=n(19431),r=n(61681),s=n(95550),o=n(8909),l=n(90472),c=n(45043),p=n(83772),u=n(65684),h=n(50749),d=n(67666);function m(e,t){return e.events.on("drag",function(e,t){let n=null,i=null;return a=>{if("cancel"===a.action)return void((0,r.pC)(i)&&(i.execute({action:"cancel"}),n=null,i=null));const s={action:a.action,screenStart:a.start,screenEnd:a.screenPoint};"start"===a.action&&(0,r.Wi)(n)&&(n=new E,i=new E,t(e,n,i,a.pointerType,s)),(0,r.pC)(n)&&n.execute(s),"end"===a.action&&(0,r.pC)(n)&&(n=null,i=null)}}(e,t))}function y(e,t){const n=[e.x,e.y,e.z],i=t,a=[Math.cos(i),Math.sin(i)],r=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(0===r)return null;a[0]/=r,a[1]/=r;const s=e=>{const t=(e.x-n[0])*a[0]+(e.y-n[1])*a[1];e.x=n[0]+t*a[0],e.y=n[1]+t*a[1]};return e=>(s(e.mapStart),s(e.mapEnd),{...e,axis:a})}function v(e,t){let n=null;return i=>{if("start"===i.action&&(n=function(e,t,n){const i=e.geometry,a=(0,c.D)(t);if((0,r.Wi)(i))return null;if("mesh"===i.type)return function(e,t,n,i){if((0,r.pC)(t.transform))return function(e,t,n,i){const a=f(n.getOriginPoint(t.spatialReference),i),s=t.spatialReference;return(0,r.Wi)(a)?null:{move:(t,i,c)=>{const p=(0,h.pB)(a.clone(),t,i,c);if(p.spatialReference.equals(s))n.origin=(0,o.f)(p.x,p.y,p.z);else{const e=(0,l.iV)(p,s);(0,r.pC)(e)&&(n.origin=(0,o.f)(e.x,e.y,e.z))}e.notifyMeshTransformChanged(),e.notifyGeometryChanged()}}}(e,t,t.transform,n);if(!t.spatialReference.equals(n))return null;let a=0,s=0,c=0;return{move:(n,r,o)=>{const l=n-a,p=r-s,h=o-c;if(l||p||h){const m=new d.Z(t.origin.x+l,t.origin.y+p,t.origin.z+h,t.origin.spatialReference);t.centerAt(m,{geographic:i===u.JY.Global}),e.notifyGeometryChanged(),a=n,s=r,c=o}}}}(e,i,a,n);const s=f(i,a),p=i.spatialReference;return(0,r.Wi)(s)?null:{move:(t,n,i)=>{const a=(0,h.pB)(s.clone(),t,n,i);a.spatialReference.equals(p)?e.geometry=a:e.geometry=(0,l.iV)(a,p)}}}(e,i.mapStart.spatialReference,t)),(0,r.Wi)(n))return null;const a=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,p=i.mapEnd.z-i.mapStart.z;return n.move(a,s,p),{...i,translationX:a,translationY:s,translationZ:p}}}function f(e,t){return(0,r.Wi)(e)?null:e.spatialReference.equals(t)?e.clone():(0,l.iV)(e,t)}function g(e,t){const n=e.map((e=>(0,r.Wg)(v(e,t)))).filter((e=>(0,r.pC)(e)));return e=>{const t=e.mapEnd.x-e.mapStart.x,i=e.mapEnd.y-e.mapStart.y,a=e.mapEnd.z-e.mapStart.z;return n.forEach((t=>t(e))),{...e,translationX:t,translationY:i,translationZ:a}}}function b(e,t){const n=new Map;for(const a of t)n.set(a,(0,i.d9)(e[a]));return t=>(n.forEach(((t,n)=>{e[n]=t})),t)}function _(e){return(0,r.pC)(e.geometry)&&"mesh"===e.geometry.type?function(e,t){const n=(0,r.pC)(t.transform)?t.transform.clone():null,i=t.vertexAttributes.clonePositional();return a=>(t.transform=n,t.vertexAttributes=i,e.notifyGeometryChanged(),a)}(e,e.geometry):b(e,["geometry"])}function x(e){const t=e.map((e=>(0,r.Wg)(_(e)))).filter((e=>(0,r.pC)(e)));return e=>(t.forEach((t=>t(e))),e)}function C(){let e=0,t=0,n=0;return i=>{"start"===i.action&&(e=i.mapStart.x,t=i.mapStart.y,n=i.mapStart.z);const a=i.mapEnd.x-e,r=i.mapEnd.y-t,s=i.mapEnd.z-n;return e=i.mapEnd.x,t=i.mapEnd.y,n=i.mapEnd.z,{...i,mapDeltaX:a,mapDeltaY:r,mapDeltaZ:s,mapDeltaSpatialReference:i.mapStart.spatialReference}}}function S(){let e=0,t=0;return n=>{"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);const i=n.screenEnd.x-e,a=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,{...n,screenDeltaX:i,screenDeltaY:a}}}function w(e,t){let n=null,i=0,r=0;return o=>{if("start"===o.action&&(n=e.toScreen(t),n.x<0||n.x>e.width||n.y<0||n.y>e.height?n=null:(i=o.screenStart.x-n.x,r=o.screenStart.y-n.y)),null==n)return null;const l=(0,a.uZ)(o.screenEnd.x-i,0,e.width),c=(0,a.uZ)(o.screenEnd.y-r,0,e.height),p=(0,s.vW)(l,c);return o.screenStart=n,o.screenEnd=p,o}}class E{constructor(){this.execute=()=>{}}next(e,t=new E){return(0,r.pC)(e)&&(this.execute=n=>{const i=e(n);(0,r.pC)(i)&&t.execute(i)}),t}}function M(e,t,n=[]){if("2d"===e.type)return e=>e;let i=null;return a=>{"start"===a.action&&(i=e.toMap(a.screenStart,{exclude:n}),(0,r.pC)(i)&&(i.z=(0,p.Ou)(i,e,t)));const s=e.toMap(a.screenEnd,{exclude:n});(0,r.pC)(s)&&(s.z=(0,p.Ou)(s,e,t));const o=(0,r.pC)(i)&&(0,r.pC)(s)?{sceneStart:i,sceneEnd:s}:null;return{...a,scenePoints:o}}}},73080:(e,t,n)=>{n.d(t,{N:()=>i});class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}}},73464:(e,t,n)=>{n.d(t,{n:()=>p});var i=n(61681),a=n(78668),r=n(41109),s=n(45043),o=n(76478),l=n(73080),c=n(22167);class p{constructor(){this.next=new o.hM}createSnapDragEventPipelineStep({predicate:e=(()=>!0),cancel:t,snappingManager:n,snappingContext:r,updatingHandles:s,useZ:l=!0}){if((0,i.Wi)(n))return e=>e;let c=null,p=null;const u=()=>{c=(0,i.IM)(c),n.doneSnapping(),(0,i.pC)(p)&&p.frameTask.remove(),p=null};t.next((e=>(u(),e))),this.next=new o.hM;const h=this._createSnapFunction(n,l);let d=null,m=null,y=null;return t=>{if(!e(t))return t;if("start"===t.action){const e=this._createFrameTask(n.view);if(p=this._createSnappingInfo(r,t,e),p.context.selfSnappingZ=null,!l&&(0,i.pC)(t.info)){const e=this._extractSelfSnappingZ(r.coordinateHelper,t.info.handle.component);(0,i.pC)(e)&&(p.context.selfSnappingZ={value:e,elevationInfo:r.elevationInfo})}}if((0,i.pC)(p)){const{context:e,originalScenePos:r,originalPos:o}=p,{mapEnd:u,mapStart:v,action:f,scenePoints:g}=t,b=this._updatePosition(o,this._computeMapDelta(u,v)),_=this._computeMapDelta(v,o),x={...t,action:"update"},C=p.context,S=this._updateScenePosition(r,g),w=n.update({point:b,scenePoint:S,context:e});if(y=w,this._applySnappedUpdate(u,w,_,l),d=b,m=S,"end"!==f){const{frameTask:e}=p;(0,i.Wi)(c)&&(c=new AbortController),s.addPromise((0,a.R8)(h({frameTask:e,event:x,context:C,point:b,scenePoint:S,delta:_,lastPos:d,lastScenePos:m,lastUpdate:y},c.signal)))}}return"end"===t.action&&u(),t}}_createSnapFunction(e,t){return(0,a.Ds)((async({frameTask:n,point:a,scenePoint:s,context:o,event:l,delta:c,lastPos:p,lastScenePos:u,lastUpdate:h},d)=>{const m=await n.schedule((()=>e.snap({point:a,scenePoint:s,context:o,signal:d})),d);if(m.valid){let s=await n.schedule((()=>m.apply()),d);a!==p&&(0,i.pC)(p)&&(s=e.update({point:p,scenePoint:u,context:o})),(0,r.k)(s,h)||(this._applySnappedUpdate(l.mapEnd,s,c,t),this.next.execute(l))}}))}_createFrameTask(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(c.T8.SNAPPING):c.sq}_createSnappingInfo(e,t,n){return{context:new l.N({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:(0,i.pC)(t.info)?t.info.handle:null,excludeFeature:e.excludeFeature,visualizer:e.visualizer}),originalPos:(0,i.pC)(t.snapOrigin)?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:(0,i.pC)(t.scenePoints)?t.scenePoints.sceneStart:null,frameTask:n}}_updatePosition(e,[t,n,i]){const a=(0,s.WG)(e);return a.x+=t,a.y+=n,a.hasZ&&(a.z+=i),a}_updateScenePosition(e,t){return(0,i.Wi)(e)||(0,i.Wi)(t)?null:this._updatePosition(e,this._computeMapDelta(t.sceneEnd,t.sceneStart))}_computeMapDelta(e,t){const n=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,n]}_applySnappedUpdate(e,t,[n,i,a],r){e.x=t.x+n,e.y=t.y+i,r&&e.hasZ&&t.hasZ&&(e.z=t.z+a)}_extractSelfSnappingZ(e,t){if(!e.hasZ())return null;const n=t.vertices;let a=null;for(const t of n){const n=e.getZ(t.pos);if((0,i.pC)(a)&&Math.abs(n-a)>1e-6)return null;(0,i.Wi)(a)&&(a=n)}return a}}},98028:(e,t,n)=>{n.d(t,{y:()=>p});var i=n(36663),a=n(53443),r=n(61681),s=n(78668),o=n(81977),l=(n(7753),n(7283),n(40266)),c=n(22167);let p=class extends a.Z{constructor(e){super(e),this.constrainResult=e=>e,this._snapPoints=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,s.Ds)((async(e,t,n,i)=>{const a=await this._frameTask.schedule((()=>t.snap({...e,context:n,signal:i})),i);a.valid&&await this._frameTask.schedule((()=>{this.stagedPoint=a.apply(),e!==this._snapPoints&&(0,r.pC)(this._snapPoints)&&(this.stagedPoint=t.update({...this._snapPoints,context:n}))}),i)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){const e="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=(0,r.pC)(e)?e.registerTask(c.T8.SNAPPING):c.sq}destroy(){this._abortController=(0,r.IM)(this._abortController),this._frameTask=(0,r.hw)(this._frameTask)}async snap(e,t,n){const{point:i,scenePoint:a}=e;return this.stagedPoint=t.update({point:i,scenePoint:a,context:n}),this._snapPoints=e,(0,r.Wi)(this._abortController)&&(this._abortController=new AbortController),this._snap(e,t,n,this._abortController.signal)}abort(){this._abortController=(0,r.IM)(this._abortController)}};(0,i._)([(0,o.Cb)({constructOnly:!0})],p.prototype,"view",void 0),(0,i._)([(0,o.Cb)()],p.prototype,"stagedPoint",null),(0,i._)([(0,o.Cb)()],p.prototype,"constrainResult",void 0),(0,i._)([(0,o.Cb)()],p.prototype,"_stagedPoint",void 0),p=(0,i._)([(0,l.j)("esri.views.interactive.snapping.SnappingOperation")],p)},4371:(e,t,n)=>{n.d(t,{a:()=>c});var i=n(23148),a=n(59282),r=n(65453),s=n(23688),o=n(82366),l=n(31367);class c{draw(e,t){const n=this._getUniqueHints(e),c=[];for(const e of n)e instanceof a.w&&c.push(this.visualizeIntersectionPoint(e,t)),e instanceof r.w&&c.push(this.visualizeLine(e,t)),e instanceof s.L&&c.push(this.visualizeParallelSign(e,t)),e instanceof l.y&&c.push(this.visualizeRightAngleQuad(e,t)),e instanceof o.n&&c.push(this.visualizePoint(e,t));return(0,i.AL)(c)}_getUniqueHints(e){const t=[];for(const n of e){let e=!0;for(const i of t)if(n.equals(i)){e=!1;break}e&&t.push(n)}return t}}},82366:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(22519),a=n(9650);class r extends a.r{constructor(e,t,n){super(t,n),this.point=e}equals(e){return e instanceof r&&(0,i.Xv)(this.point,e.point)}}}}]);