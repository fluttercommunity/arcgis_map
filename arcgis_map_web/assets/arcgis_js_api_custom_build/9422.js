"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[9422],{86493:(e,t,i)=>{i.d(t,{T:()=>ae,I:()=>ce});var n=i(36663),o=i(80085),r=(i(39994),i(31355)),s=i(53280),a=i(23148),l=i(61681),p=i(39405),c=i(76868),h=i(17321),d=i(81977),u=i(7753),y=(i(7283),i(40266)),g=i(45857),m=i(83772),v=(i(91957),i(67134)),_=i(6766),f=i(8909),x=i(32284),w=i(17700),C=i(38028),b=i(35925),T=i(40278),S=i(69114),O=i(10663),M=i(61044),V=i(19546),I=i(67666);function P(e,t,i=null){return(0,l.pC)(i)?[e,t,i]:[e,t]}function R(e,t,i=null){return(0,l.pC)(i)?{x:e,y:t,z:i}:{x:e,y:t}}class W{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return(0,l.lV)(e.map((e=>this.mapToLocal(e))))}get doUnnormalization(){return!1}}class G extends W{constructor(e,t,i=null){super(t),this._defaultZ=i,this.transform=(0,S.c)(),this.transformInv=(0,S.c)(),this.transform=(0,S.a)(e),(0,T.c)(this.transformInv,this.transform)}makeMapPoint(e,t){return P(e,t,this._defaultZ)}mapToLocal(e){return R(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return P(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class Z extends W{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,f.c)(),this.tangentFrameUpWS=(0,f.c)(),this.tangentFrameRightWS=(0,f.c)(),this.tangentFrameForwardWS=(0,f.c)(),this.localFrameRightWS=(0,f.c)(),this.localFrameUpWS=(0,f.c)(),this.worldToLocalTransform=(0,M.a)(),this.localToWorldTransform=(0,M.a)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const i=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,V.R.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,V.R.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,V.R.Z,this.tangentFrameForwardWS);const n=(0,f.c)();(0,_.g)(n,this.tangentFrameForwardWS,(0,_.e)(i,this.tangentFrameForwardWS)),(0,_.b)(this.localFrameRightWS,i,n),(0,_.n)(this.localFrameRightWS,this.localFrameRightWS),(0,_.f)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,O.r)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,O.i)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return P(e,t,this.defaultZ)}mapToLocal(e){const t=(0,f.c)();this.view.renderCoordsHelper.toRenderCoords(new I.Z({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,_.q)(t,t,this.worldToLocalTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return(0,l.pC)(i)?R(i.x/this.scale,i.y/this.scale):null}localToMap(e){const t=(0,f.c)();this.view.renderCoordsHelper.toRenderCoords(new I.Z({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,_.q)(t,t,this.localToWorldTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return(0,l.pC)(i)?P(i.x,i.y,this.defaultZ):null}}function z(e,t){if("2d"===e.type)return new G(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const i=t.length>2?new I.Z({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new I.Z({x:t[0],y:t[1],spatialReference:e.spatialReference});return new Z(e,i)}return null}var D=i(74304),k=i(90819),E=i(89542);function H(e,t){const i=new I.Z({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(i.z=e[2]),i}function F(e,t,i){const n=new k.Z({paths:e,spatialReference:t});return i&&(0,C.nc)(n),n}function L(e,t,i,n=!0){const o=(0,v.d9)(e);o.forEach((e=>{const t=e[0],i=e[e.length-1];(0,u.fS)(t,i)&&1!==e.length||e.push(e[0])}));let r=new E.Z({rings:o,spatialReference:t});return r.rings.forEach((e=>{(0,C.bu)(e,!1,!1)||e.reverse()})),i&&(0,C.nc)(r),n&&r.isSelfIntersecting&&(0,b.JY)(t)&&(r=(0,w.simplify)(r)),r}function A(e,t,i){const n=t.mapToLocalMultiple(e),o=[],r={x:n[0].x,y:n[0].y},s=n[1].x,a=n[1].y,p=Math.round(s-r.x),c=Math.round(a-r.y),h=Math.max(Math.abs(p),Math.abs(c));if(i){const e={x:r.x+h,y:r.y+h},t={x:r.x-h,y:r.y-h};o.push(R(e.x,t.y),R(t.x,t.y),R(t.x,e.y),R(e.x,e.y))}else{const e={x:p>0?r.x+h:r.x-h,y:c>0?r.y+h:r.y-h};o.push(R(r.x,r.y),R(e.x,r.y),R(e.x,e.y),R(r.x,e.y))}return U(L([(0,l.lV)(o.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!0),o,t)}function U(e,t,i){const n=q(t[3],t[2],i),o=q(t[1],t[2],i),r=q(t[0],t[1],i),s=q(t[0],t[3],i);return{geometry:e,midpoints:(0,l.pC)(n)&&(0,l.pC)(o)&&(0,l.pC)(r)&&(0,l.pC)(s)?{top:n,right:o,bottom:r,left:s}:null}}function q(e,t,i){X[0]=e.x,X[1]=e.y,X[2]=0,Y[0]=t.x,Y[1]=t.y,Y[2]=0,(0,_.h)(X,X,Y,.5),Q.x=X[0],Q.y=Y[1],Q.z=Y[2];const n=i.localToMap(Q);return(0,l.pC)(n)?H(n,i.spatialReference):null}const Q=R(0,0,0),X=(0,f.c)(),Y=(0,f.c)();function j(e,t,i,n){const o=t.mapToLocalMultiple(e);let r=null,s=null;if(i)r=o[0],s=o[1];else{const e=o[0],t=o[1],i=Math.round(t.x-e.x),n=Math.round(t.y-e.y),a=Math.max(Math.abs(i),Math.abs(n));r=R(i>0?e.x+a/2:e.x-a/2,n>0?e.y+a/2:e.y-a/2),s=R(Math.abs(i)>Math.abs(n)?r.x-a/2:r.x,Math.abs(i)>Math.abs(n)?r.y:r.y-a/2)}const a=t.localToMap(r),p=t.localToMap(s);if((0,l.Wi)(a)||(0,l.Wi)(p))return null;t.doUnnormalization&&(0,C.Sq)([[a,p]],t.spatialReference);const c=H(a,t.spatialReference),d=H(p,t.spatialReference),u=(0,h.c9)(t.spatialReference);let y=0;if((0,b.JY)(t.spatialReference))y=u*(0,w.distance)(c,d,null);else{const e=r.x-s.x,t=r.y-s.y;y=u*Math.sqrt(e*e+t*t)*(n||1)}const g=new x.Z({center:c,radius:y,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:L(g.rings,g.spatialReference,!1),center:c,edge:d}}var N=i(68610),B=i(41386),J=i(35329),K=i(54079);let $=class extends K.h{constructor(e){super(e),this.type="draw-point"}};(0,n._)([(0,d.Cb)()],$.prototype,"type",void 0),(0,n._)([(0,d.Cb)()],$.prototype,"elevation",void 0),$=(0,n._)([(0,y.j)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],$);let ee=class extends K.h{constructor(e){super(e),this.type="draw-polyline"}};(0,n._)([(0,d.Cb)()],ee.prototype,"type",void 0),(0,n._)([(0,d.Cb)()],ee.prototype,"elevation",void 0),(0,n._)([(0,d.Cb)()],ee.prototype,"totalLength",void 0),(0,n._)([(0,d.Cb)()],ee.prototype,"viewType",void 0),ee=(0,n._)([(0,y.j)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],ee);let te=class extends K.h{constructor(e){super(e),this.type="draw-polygon"}};(0,n._)([(0,d.Cb)()],te.prototype,"type",void 0),(0,n._)([(0,d.Cb)()],te.prototype,"elevation",void 0),(0,n._)([(0,d.Cb)()],te.prototype,"area",void 0),(0,n._)([(0,d.Cb)()],te.prototype,"viewType",void 0),te=(0,n._)([(0,y.j)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],te);let ie=class extends K.h{constructor(e){super(e),this.type="draw-rectangle",this.xSize=p.yP,this.ySize=p.yP,this.area=p.MQ}};(0,n._)([(0,d.Cb)()],ie.prototype,"type",void 0),(0,n._)([(0,d.Cb)()],ie.prototype,"xSize",void 0),(0,n._)([(0,d.Cb)()],ie.prototype,"ySize",void 0),(0,n._)([(0,d.Cb)()],ie.prototype,"area",void 0),ie=(0,n._)([(0,y.j)("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],ie);let ne=class extends K.h{constructor(e){super(e),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=p.MQ}};(0,n._)([(0,d.Cb)()],ne.prototype,"type",void 0),(0,n._)([(0,d.Cb)()],ne.prototype,"radius",void 0),(0,n._)([(0,d.Cb)()],ne.prototype,"xSize",void 0),(0,n._)([(0,d.Cb)()],ne.prototype,"ySize",void 0),(0,n._)([(0,d.Cb)()],ne.prototype,"area",void 0),ne=(0,n._)([(0,y.j)("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],ne);var oe=i(18913),re=i(34541),se=i(54682);let ae=class extends((0,s.p)(r.Z.EventedMixin(N.m))){constructor(e){super(e),this._graphic=null,this._createOperationGeometry=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.labelOptions=new B.Z,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.tooltip=null,this.tooltipOptions=new J.Z}initialize(){this.internalGraphicsLayer=new g.Z({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e))),(0,c.YP)((()=>this.tooltipOptions.enabled),(e=>{this.tooltip=e?new oe.u({view:this.view,info:this._tooltipInfo}):(0,l.SC)(this.tooltip)}),c.tX),(0,c.YP)((()=>this._tooltipInfo),(e=>{(0,l.pC)(this.tooltip)&&(this.tooltip.info=e)}),c.tX)]),this.finishToolCreation()}destroy(){this.drawOperation=(0,l.SC)(this.drawOperation),this.tooltip=(0,l.SC)(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,l.SC)(this.internalGraphicsLayer),this._set("view",null)}get _defaultElevation(){return(0,p.yG)(this.defaultZ,"meters")}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),(0,l.pC)(this._graphic)&&(this._graphic.symbol=e)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(e){this._graphic=new o.Z({...this.graphicProperties,geometry:e,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add((0,a.kB)((()=>{(0,l.pC)(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=(0,l.SC)(this._graphic))})),le)}_destroyAllVisualisations(){this.handles.remove(pe.outline),this.handles.remove(pe.regularVertices),this.handles.remove(pe.activeVertex),this.handles.remove(le)}_getCreateOperationGeometry(e={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const t=this.drawOperation.stagedVertex,i=this.drawOperation.committedVertices,n=i.slice();(0,l.pC)(t)&&n.push(this.drawOperation.coordinateHelper.pointToArray(t));const o=(0,l.pC)(t)?this.drawOperation.coordinateHelper.pointToArray(t):i.splice(-1)[0],r={regularVertices:null,activeVertex:null,full:null,outline:null,circle:null,rectangle:null},s=n.length,a=this.view.spatialReference,p="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":r.regularVertices=i,r.activeVertex=o,r.full=this.drawOperation.coordinateHelper.arrayToPoint(n[0]);break;case"multipoint":r.regularVertices=i,r.activeVertex=o,s>0&&(r.full=function(e,t){return new D.Z({points:e,spatialReference:t})}(n,a));break;case"polyline":r.regularVertices=i,r.activeVertex=o,s>0&&(r.full=F([n],a,p));break;case"polygon":r.regularVertices=i,r.activeVertex=o,s>0&&(r.full=L([n],a,p,!0));break;case"circle":if(s>0){const t=z(this.view,n[0]);if(1===s&&e.operationComplete){const e=n[0],i=t.makeMapPoint(e[0]+he*this.view.resolution,e[1]);r.circle=j([e,i],t,!0),r.full=(0,l.pC)(r.circle)?r.circle.geometry:null}else 2===s&&(this.forceUniformSize?(r.circle=j(n,t,this.centered),r.full=(0,l.pC)(r.circle)?r.circle.geometry:null):(r.rectangle=function(e,t,i){const n=t.mapToLocalMultiple(e),o=n[0],r=n[1],s=Math.round(r.x-o.x),a=Math.round(r.y-o.y),p=R(i?o.x:o.x+s/2,i?o.y:o.y+a/2),c=i?s:s/2,h=i?a:a/2,d=[],u=2*Math.PI/60;function y(e){const t=Math.cos(e),i=Math.sin(e);return R(c*t+p.x,h*i+p.y)}for(let e=0;e<60;e++)d.push(y(e*u));d.push(d[0]);const{spatialReference:g,doUnnormalization:m}=t,v=L([(0,l.lV)(d.map((e=>t.localToMap(e))))],g,m,!1),_=t.localToMap(y(Math.PI/2)),f=t.localToMap(y(0)),x=t.localToMap(y(-Math.PI/2)),w=t.localToMap(y(Math.PI));return{geometry:v,midpoints:(0,l.pC)(_)&&(0,l.pC)(f)&&(0,l.pC)(x)&&(0,l.pC)(w)?{top:H(_,g),right:H(f,g),bottom:H(x,g),left:H(w,g)}:null}}(n,t,this.centered),r.full=r.rectangle.geometry))}break;case"rectangle":if(s>0){const t=z(this.view,n[0]);if(1===s&&e.operationComplete){const e=n[0],i=t.makeMapPoint(e[0]+he*this.view.resolution,e[1]);r.rectangle=A([e,i],t,!0),r.full=r.rectangle.geometry}else 2===s&&(r.rectangle=this.forceUniformSize?A(n,t,this.centered):function(e,t,i){let n=t.mapToLocalMultiple(e);if(1===n.length){const e=48,t=n[0];n=[R(t.x-e,t.y+e),R(t.x+e,t.y-e),R(t.x+e,t.y-e),R(t.x-e,t.y+e)]}const o=[],r={x:n[0].x,y:n[0].y},s={x:n[1].x,y:n[1].y};if(i){const e=Math.round(s.x-r.x),t=Math.round(s.y-r.y);o.push(R(r.x-e,r.y-t),R(s.x,r.y-t),R(s.x,s.y),R(r.x-e,s.y))}else o.push(R(r.x,r.y),R(s.x,r.y),R(s.x,s.y),R(r.x,s.y));return U(L([(0,l.lV)(o.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!0),o,t)}(n,t,this.centered),r.full=r.rectangle.geometry)}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":s>1&&(r.outline=F([n],a,p));break;case"circle":case"rectangle":(0,l.pC)(r.full)&&"polygon"===r.full.type&&(r.outline=L(r.full.rings,a,p))}return r}initializeGraphic(e){return null}onComplete(e){this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const e=this._getCreateOperationGeometry({operationComplete:!0});(0,l.pC)(e)&&((0,l.Wi)(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full,t=(0,l.Wg)(this._graphic).clone())}this._createOperationGeometry=null,this.emit("complete",{graphic:t,...e})}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(e){this._updateGraphic(),this.emit("vertex-add",e)}onVertexRemove(e){this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();this._createOperationGeometry=e,(0,l.Wi)(e)?this._destroyAllVisualisations():((0,l.pC)(e.outline)?this.handles.add(this.onOutlineChanged(e.outline),pe.outline):this.handles.remove(pe.outline),(0,l.pC)(e.regularVertices)?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),pe.regularVertices):this.handles.remove(pe.regularVertices),(0,l.pC)(e.activeVertex)?this.handles.add(this.onActiveVertexChanged(e.activeVertex),pe.activeVertex):this.handles.remove(pe.activeVertex),(0,l.pC)(e.full)?(0,l.Wi)(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full:this.handles.remove(le))}get _tooltipInfo(){const{drawOperation:e}=this;if(!e)return null;switch(this.geometryType){case"point":return this._drawPointTooltipInfo;case"polyline":return this._drawPolylineTooltipInfo;case"polygon":return this._drawPolygonTooltipInfo;case"rectangle":return this._drawRectangleTooltipInfo;case"circle":return this._drawCircleTooltipInfo;default:return null}}get _drawPointTooltipInfo(){const e=(0,l.yw)(this.graphic,(e=>e.geometry));return(0,l.Wi)(e)||"point"!==e.type||"2d"===this.view.type&&0===this.defaultZ?null:new $({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail})}get _drawPolylineTooltipInfo(){const e=this._createOperationGeometry,t=(0,l.pC)(e)?e.full:null;if((0,l.Wi)(t)||"polyline"!==t.type)return null;const i=(0,se.Ul)(t,this._elevationMode);return new ee({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:(0,l.Pt)(i,p.yP),viewType:this.view.type})}get _drawPolygonTooltipInfo(){const e=this._createOperationGeometry,t=(0,l.pC)(e)?e.full:null;if((0,l.Wi)(t)||"polygon"!==t.type)return null;const i=(0,re.k)(t,this._elevationMode);return new te({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:(0,l.Pt)(i,p.MQ),viewType:this.view.type})}get _drawRectangleTooltipInfo(){return(0,l.Wi)(this.drawOperation)?null:new ie({tooltipOptions:this.tooltipOptions,xSize:(0,l.Pt)(this._xSize,p.yP),ySize:(0,l.Pt)(this._ySize,p.yP),area:(0,l.Pt)(this._fullGeometryArea,p.MQ)})}get _drawCircleTooltipInfo(){if((0,l.Wi)(this.drawOperation))return null;const e=this.forceUniformSize;return new ne({tooltipOptions:this.tooltipOptions,radius:e?(0,l.Pt)(this._circleRadius,p.yP):null,xSize:e?null:(0,l.Pt)(this._xSize,p.yP),ySize:e?null:(0,l.Pt)(this._ySize,p.yP),area:(0,l.Pt)(this._fullGeometryArea,p.MQ)})}get _circleRadius(){const e=this._createOperationGeometry;return(0,l.pC)(e)&&(0,l.pC)(e.circle)&&(0,l.pC)(e.circle.center)&&(0,l.pC)(e.circle.edge)?(0,se.GQ)(e.circle.center,e.circle.edge,this._elevationMode):null}get _xSize(){const e=this._createOperationGeometry;if((0,l.Wi)(e)||(0,l.Wi)(e.rectangle))return null;const{midpoints:t}=e.rectangle;return(0,l.pC)(t)?(0,se.GQ)(t.left,t.right,this._elevationMode):null}get _ySize(){const e=this._createOperationGeometry;if((0,l.Wi)(e)||(0,l.Wi)(e.rectangle))return null;const{midpoints:t}=e.rectangle;return(0,l.pC)(t)?(0,se.GQ)(t.top,t.bottom,this._elevationMode):null}get _fullGeometryArea(){const e=this._createOperationGeometry,t=(0,l.pC)(e)?e.full:null;return(0,l.Wi)(t)||"polygon"!==t.type?null:(0,re.k)(t,this._elevationMode)}get _elevationTooltipDetail(){return{mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}get _vertexTooltipElevation(){const{tooltipOptions:e,view:t,drawOperation:i}=this;if((0,l.Wi)(i))return this._defaultElevation;const n=i.stagedVertex??i.lastVertex;if((0,l.Wi)(n)||"2d"===t.type)return this._defaultElevation;const o={mode:e.elevation.mode,offset:0},r=(0,m.vQ)(t,n,i.elevationInfo,o)*(0,h._R)(n.spatialReference);return(0,p.yG)(r,"meters")}get _elevationMode(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}};(0,n._)([(0,d.Cb)()],ae.prototype,"_createOperationGeometry",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"_defaultElevation",null),(0,n._)([(0,d.Cb)({value:!0})],ae.prototype,"centered",null),(0,n._)([(0,d.Cb)({nonNullable:!0})],ae.prototype,"defaultZ",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"drawOperation",void 0),(0,n._)([(0,d.Cb)({value:!0})],ae.prototype,"enabled",null),(0,n._)([(0,d.Cb)({value:!0})],ae.prototype,"forceUniformSize",null),(0,n._)([(0,d.Cb)({constructOnly:!0})],ae.prototype,"geometryType",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"graphic",null),(0,n._)([(0,d.Cb)({constructOnly:!0})],ae.prototype,"graphicProperties",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"graphicSymbol",null),(0,n._)([(0,d.Cb)({constructOnly:!0})],ae.prototype,"hasZ",void 0),(0,n._)([(0,d.Cb)({constructOnly:!0,type:B.Z})],ae.prototype,"labelOptions",void 0),(0,n._)([(0,d.Cb)({constructOnly:!0})],ae.prototype,"mode",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"snappingManager",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"snapToScene",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"tooltip",void 0),(0,n._)([(0,d.Cb)({constructOnly:!0,type:J.Z})],ae.prototype,"tooltipOptions",void 0),(0,n._)([(0,d.Cb)({readOnly:!0})],ae.prototype,"type",void 0),(0,n._)([(0,d.Cb)({readOnly:!0})],ae.prototype,"updating",null),(0,n._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],ae.prototype,"view",void 0),(0,n._)([(0,d.Cb)()],ae.prototype,"_tooltipInfo",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_drawPointTooltipInfo",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_drawPolylineTooltipInfo",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_drawPolygonTooltipInfo",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_drawRectangleTooltipInfo",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_drawCircleTooltipInfo",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_circleRadius",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_xSize",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_ySize",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_fullGeometryArea",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_elevationTooltipDetail",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_vertexTooltipElevation",null),(0,n._)([(0,d.Cb)()],ae.prototype,"_elevationMode",null),ae=(0,n._)([(0,y.j)("esri.views.draw.DrawGraphicTool")],ae);const le="create-operation-graphic",pe={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function ce(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";default:return null}}const he=48},84703:(e,t,i)=>{i.d(t,{w:()=>M});var n=i(36663),o=i(31355),r=i(53280),s=i(67134),a=i(61681),l=i(78668),p=i(76868),c=i(95550),h=i(81977),d=(i(7283),i(40266)),u=i(41109),y=i(83772),g=i(65684);const m="click";class v{constructor({grabbableForEvent:e}){this.events=new o.Z,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e}intersectionDistance(e,t){return 0}attach(){}detach(){}}var _=i(64594),f=i(76478),x=i(4703),w=i(62177),C=i(41386),b=i(35329),T=i(73080),S=i(73464),O=i(98028);let M=class extends(o.Z.EventedMixin(r.r)){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new S.n,this.isDraped=!0,this.labelOptions=new C.Z,this.tooltipOptions=new b.Z,this.snapToSceneEnabled=null,this.lastVertex=null,(0,a.Wi)(e.elevationInfo)&&(this.elevationInfo=(0,y.mF)(e.hasZ))}initialize(){const{geometryType:e,view:t}=this,{spatialReference:i}=t,n="viewingMode"in t.state?t.state.viewingMode:g.JY.Local,o="segment"===e||"multipoint"===e?"polyline":e;this.coordinateHelper=(0,_.Y6)(this.hasZ,this.hasM,i),this._editGeometryOperations=new w.c(new x.XE(o,this.coordinateHelper)),this._snappingOperation=new O.y({view:t,constrainResult:e=>(0,a.Wi)(e)?e:this._getEffectiveDrawSurface().constrainZ(e)}),this.handles.add((0,p.YP)((()=>this.stagedVertex),(e=>{(0,a.Wi)(e)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"})}),{sync:!0,equals:(e,t)=>(0,a._W)(e,t,u.k)})),this._activeComponent=new x.wA(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const r=this.segmentLabels;(0,a.pC)(r)&&(r.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([(0,p.YP)((()=>this.labelOptions.enabled),(e=>{r.visible=e}),p.tX),this.on("cursor-update",(()=>{const e=this.stagedVertex;r.stagedVertex=(0,a.pC)(e)?this.coordinateHelper.pointToVector(e):null}))])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t})}const n=this._activeComponent.getLastVertex(),o=(0,a.pC)(n)?this.coordinateHelper.vectorToDehydratedPoint(n.pos):null;((0,a.Wi)(o)||(0,a.Wi)(this.lastVertex)||!(0,u.k)(this.lastVertex,o))&&(this.lastVertex=o)}))),this._manipulator=new v({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==e,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(e=>this._onImmediateClick(e))),this._manipulator.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e)))])}destroy(){(0,a.SC)(this.segmentLabels),(0,a.SC)(this._snappingOperation),this._editGeometryOperations=(0,a.SC)(this._editGeometryOperations)}get _snappingEnabled(){return(0,a.pC)(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._getEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e){this._set("drawingMode",e??m)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return(0,a.pC)(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=(0,s.d9)(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return(0,a.pC)(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),(0,a.pC)(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),(0,a.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const i="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){(0,a.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch((0,a.Wg)(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return(0,f.Xd)(e,((e,t,i,n)=>{const o="touch"===n&&this._snappingEnabled;!this.isCompleted&&o&&(i=i.next((e=>(o&&(0,a.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),e))),t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||o&&0===this.numVertices)&&this.commitStagedVertex()),e))).next((0,f.BS)(this.view,this.elevationInfo)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>o,cancel:i,snappingManager:this.snappingManager,snappingContext:new T.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:n,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint}),this._snappingPipeline.next).next((e=>(o&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e))))}))}_createManipulatorDragPipelineFreehand(e){return(0,f.Xd)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&((0,a.Wi)(this.stagedVertex)&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}_createManipulatorDragPipelineHybrid(e){return(0,f.Xd)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&((0,a.Wi)(this.stagedVertex)&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}get _drawAtFixedElevation(){return("segment"===this.geometryType||"polygon"===this.geometryType)&&this.numCommittedVertices>0}_getEffectiveDrawSurface(){if((0,a.Wi)(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;return(0,a.pC)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(t=!0),(0,a.pC)(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),(0,a.pC)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(t=!1),this._drawAtFixedElevation&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getEffectiveDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if((0,a.pC)(i))return e.stopPropagation(),void this.complete();const n=this._screenToMap(e.screenPoint);if((0,a.pC)(n))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&((0,a.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),(0,a.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=(0,c.vW)(e.x,e.y),i=this._snappingOperation;if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void i.abort();e.stopPropagation();const n=this._closeOnClickVertexIndex(t);if((0,a.pC)(n))return this._closeOnVertex(n),void i.abort();const o=this._screenToMap(t),r=this._requiresScenePoint?this.drawSurface.screenToMap(t):null;if(this._manipulator.cursor=(0,a.pC)(o)?"crosshair":null,(0,a.Wi)(o))return void i.abort();const s=this.snappingManager;if((0,a.Wi)(s))return this.stagedVertex=o,void i.abort();const p=this._drawAtFixedElevation?(0,a.yw)(this.elevationDrawSurface,(({defaultZ:e})=>e)):null,h=new T.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer,selfSnappingZ:(0,a.pC)(p)?{value:p,elevationInfo:this.elevationInfo}:null});this.updatingHandles.addPromise((0,l.R8)(i.snap({point:o,scenePoint:r},s,h)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getEffectiveDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),(0,a.Wi)(e))return null;const i=this._screenToMap(t.screenEnd);return(0,a.pC)(i)?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const i=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!(0,a.pC)(i)&&function(e,t,i){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o<=i}(i,t,25)}};(0,n._)([(0,h.Cb)()],M.prototype,"_snappingEnabled",null),(0,n._)([(0,h.Cb)()],M.prototype,"defaultZ",void 0),(0,n._)([(0,h.Cb)()],M.prototype,"isDraped",void 0),(0,n._)([(0,h.Cb)({value:m})],M.prototype,"drawingMode",null),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"elevationDrawSurface",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"elevationInfo",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0,type:C.Z})],M.prototype,"labelOptions",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0,type:b.Z})],M.prototype,"tooltipOptions",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"geometryType",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"hasM",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"hasZ",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"manipulators",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"drawSurface",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"segmentLabels",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"snappingManager",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"snappingVisualizer",void 0),(0,n._)([(0,h.Cb)()],M.prototype,"snapToSceneEnabled",void 0),(0,n._)([(0,h.Cb)()],M.prototype,"_snappingOperation",void 0),(0,n._)([(0,h.Cb)()],M.prototype,"stagedVertex",null),(0,n._)([(0,h.Cb)()],M.prototype,"lastVertex",void 0),(0,n._)([(0,h.Cb)()],M.prototype,"updating",null),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"view",void 0),M=(0,n._)([(0,d.j)("esri.views.draw.DrawOperation")],M)},15991:(e,t,i)=>{i.d(t,{aL:()=>l,hP:()=>c,iW:()=>p});var n=i(61681),o=i(95550),r=i(48358),s=i(45043),a=i(83772);class l{constructor(e,t,i,n=null){this._elevationInfo=e,this.defaultZ=t,this._view=i,this._excludeGraphics=n}screenToMap(e){if((0,n.pC)(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,o.s1)(e.x,e.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const t=this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,o.s1)(e.x,e.y),this._elevationInfo,0,this._excludeGraphics);return(0,n.pC)(t)&&(t.z=void 0),t}mapToScreen(e){const t=(0,r.Tx)(e.x,e.y,(0,a.vQ)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}constrainZ(e){const{defaultZ:t}=this;return(0,n.pC)(t)&&e.z!==t&&((e=(0,s.WG)(e)).z=t),e}}class p{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude});return(0,n.pC)(t)&&(t.z=(0,a.Ou)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return(0,n.pC)(this.elevationInfo)&&(t=(0,r.Tx)(e.x,e.y,(0,a.vQ)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}constrainZ(e){return e}}class c{constructor(e,t=!1,i=0){this.view=e,this.hasZ=t,this.defaultZ=i,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const n=e.toMap(t);return n.z=i,n}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=(0,s.WG)(e)).z=t),e}}},34541:(e,t,i)=>{i.d(t,{f:()=>m,k:()=>g});var n=i(61681),o=i(95785),r=(i(91957),i(39405)),s=i(17700),a=i(90472),l=i(85130),p=i(27493),c=i(14685);function h(e){const{spatialReference:t}=e;return(0,p.T)(t,d,u,y,e)}function d(e){return(0,r.ne)(Math.abs((0,l.p8)([e],"square-meters")[0]),"square-meters")}function u(e){try{return(0,r.ne)(Math.abs((0,s.geodesicArea)(e,"square-meters")),"square-meters")}catch(e){return null}}function y(e){const t=[];return(0,a.K2)(e,t)?(0,r.ne)(Math.abs((0,l.p8)([{type:"polygon",rings:t,spatialReference:c.Z.WGS84}],"square-meters")[0]),"square-meters"):null}function g(e,t,i=(0,o.ln)()){if("on-the-ground"===t){const t=h(e);return(0,n.pC)(t)?t:(0,o.X)(e,i)}return(0,o.oN)(e,i)}function m(e,t=(0,o.ln)()){return g(e,"on-the-ground",t)}},95785:(e,t,i)=>{i.d(t,{X:()=>y,bT:()=>f,ln:()=>_,oN:()=>u});var n=i(61681),o=i(39405),r=i(17321),s=i(5992),a=i(6766),l=i(8909),p=i(90472),c=i(69430),h=i(42772),d=i(89976);function u(e,t={positionsWorldCoords:[]}){return g(e,t)}function y(e,t={positionsWorldCoords:[]}){return g(e,t,!1)}function g(e,t,i=e.hasZ){const s=(0,d.m)(e.spatialReference),u=(0,r.oq)(s);if((0,n.Wi)(u))return null;const y=(e,t)=>!(t.length<2||((0,a.s)(e,t[0],t[1],i&&t[2]||0),0));let g=0;for(const i of e.rings){const n=i.length;if(n<3)continue;const{positionsWorldCoords:o}=t;for(;o.length<n;)o.push((0,l.c)());const r=m,d=(0,a.s)(v,0,0,0),u=1/n;for(let t=0;t<n;t++){if(!y(r,i[t]))return null;if(!(0,p.SH)(r,e.spatialReference,o[t],s))return null;(0,a.z)(d,d,o[t],u)}const _=(0,c.zk)(o[0],o[1],d,(0,c.re)());if(0===(0,a.p)((0,c.mJ)(_)))continue;for(let e=0;e<n;e++)(0,c.tx)(_,d,o[e],o[e]);const x=f(o);for(let e=0;e<x.length;e+=3)g+=(0,h.wu)(o[x[e]],o[x[e+1]],o[x[e+2]])}return(0,o.ne)(g,u)}const m=(0,l.c)(),v=(0,l.c)();function _(){return{positionsWorldCoords:[]}}function f(e){return(0,s.e)(function(e){const t=new Float64Array(2*e.length);for(let i=0;i<e.length;++i){const n=e[i],o=2*i;t[o+0]=n[0],t[o+1]=n[1]}return t}(e),[],2)}}}]);