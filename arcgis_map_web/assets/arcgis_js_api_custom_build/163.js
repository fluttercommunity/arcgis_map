(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[163],{19048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var i,o=r(56140),n=(r(95830),r(36544),r(68055),r(79881)),s=r(56274),a=r(30590),l=r(15307),c=r(87566),p=r(60538),d=(r(10923),r(57002),r(86035),r(19677)),u=r(58385),h=r(93533);const y=(0,s.wY)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),f=y.jsonValues.slice();(0,d.e$)(f,"orthometric");const g=(0,s.wY)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let m=i=class extends u.wq{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return y.write(e,t,r)}readHeightModel(e,t,r){return y.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new l.Z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(v(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,h.$C)(e)||g.read(e)||(r&&r.messages&&r.messages.push(v(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,h.cM)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i;return t.read(e,{origin:"web-scene"}),t}};function v(e,t){return new l.Z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,o._)([(0,n.Cb)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:f,default:"ellipsoidal"}}}})],m.prototype,"heightModel",void 0),(0,o._)([(0,p.c)("web-scene","heightModel")],m.prototype,"writeHeightModel",null),(0,o._)([(0,a.r)(["web-scene","service"],"heightModel")],m.prototype,"readHeightModel",null),(0,o._)([(0,n.Cb)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g.jsonValues,write:g.write}}}})],m.prototype,"heightUnit",void 0),(0,o._)([(0,a.r)("web-scene","heightUnit")],m.prototype,"readHeightUnit",null),(0,o._)([(0,a.r)("service","heightUnit")],m.prototype,"readHeightUnitService",null),(0,o._)([(0,n.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],m.prototype,"vertCRS",void 0),(0,o._)([(0,a.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],m.prototype,"readVertCRS",null),m=i=(0,o._)([(0,c.j)("esri.geometry.HeightModelInfo")],m);const w=m},50897:(e,t,r)=>{"use strict";r.d(t,{Gv:()=>d,SO:()=>l,r3:()=>p,Ue:()=>o,oJ:()=>s,al:()=>n,kK:()=>c,HH:()=>a}),r(95830);var i=r(52937);function o(e=u){return[e[0],e[1],e[2],e[3]]}function n(e,t,r,i,n=o()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function s(e,t=o()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function a(e,t){return new i.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function l(e){return function(e){return e[0]>=e[2]?0:e[2]-e[0]}(e)*function(e){return e[1]>=e[3]?0:e[3]-e[1]}(e)}function c(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function p(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const d=[1/0,1/0,-1/0,-1/0],u=[0,0,0,0]},59880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var i=r(56140),o=(r(95830),r(59472)),n=(r(36544),r(68055),r(79881)),s=r(30590),a=r(87566),l=r(32656),c=r(37704),p=r(53175),d=r(96054),u=r(10923),h=r(57002),y=r(9678),f=r(86035);function g(e){const t=(0,o.pC)(e)&&e.origins?e.origins:[void 0];return(r,i)=>{const s=function(e,t,r){if((0,o.pC)(e)&&"resource"===e.type)return function(e,t,r){const i=(0,p.VZ)(t,r);return{type:String,read:(e,t,r)=>{const o=(0,c.r)(e,t,r);return i.type===String?o:"function"==typeof i.type?new i.type({url:o}):void 0},write:{writer(t,n,s,a){if(!a||!a.resources)return"string"==typeof t?void(n[s]=(0,c.t)(t,a)):void(n[s]=t.write({},a));const l=function(e){return(0,o.Wi)(e)?null:"string"==typeof e?e:e.url}(t),p=l?(0,c.t)(l,{...a,verifyItemRelativeUrls:a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},1):null,h=i.type!==String&&(!(0,d.l)(this)||a&&a.origin&&this.originIdOf(r)>(0,y.M9)(a.origin));a&&a.portalItem&&(0,o.pC)(p)&&!(0,u.YP)(p)?h?function(e,t,r,i,o,n,s,a){const l=s.portalItem.resourceFromPath(i),c=w(r,i,s);(0,f.B)(c)===(0,u.Ml)(l.path)?(v(e,t,l,c,s.resources.toUpdate),o[n]=i):m(e,t,r,i,o,n,s,a)}(this,r,t,p,n,s,a,e):function(e,t,r,i){i.resources.toKeep.push({resource:i.portalItem.resourceFromPath(e)}),t[r]=e}(p,n,s,a):a&&a.portalItem&&((0,o.Wi)(p)||(0,o.pC)((0,c.i)(p))||(0,u.jc)(p)||h)?m(this,r,t,p,n,s,a,e):n[s]=p}}}}(e,t,r);switch((0,o.pC)(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=c.p;return{read:e,write:t}}}}(e,r,i);for(const e of t){const t=(0,n.CJ)(r,e,i);for(const e in s)t[e]=s[e]}}}function m(e,t,i,n,s,a,l,c){const p=(0,h.D)(),d=w(i,n,l),y=(0,u.v_)((0,o.U2)(c,"prefix"),p),g=`${y}.${(0,f.B)(d)}`,m=l.portalItem.resourceFromPath(g);(0,u.jc)(n)&&l.resources.pendingOperations.push(async function(e){const t=(await Promise.resolve().then(r.bind(r,36654))).default,{data:i}=await t(e,{responseType:"blob"});return i}(n).then((e=>{m.path=`${y}.${(0,f.B)(e)}`,s[a]=m.itemRelativeUrl})).catch((()=>{}))),v(e,t,m,d,l.resources.toAdd),s[a]=m.itemRelativeUrl}function v(e,t,r,i,o){o.push({resource:r,content:i,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function w(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}var S,_=r(7830),b=r(59691),C=r(56700),M=r(43072),R=r(80621),U=r(18152),x=r(78910),O=r(48899),I=r(33716),T=r(10113),k=r(54209),j=r(61393),N=r(58385),H=r(28293),Z=r(36654),J=r(82550),V=r(15307),L=r(60538),P=r(11720),$=(r(36348),r(55162));let D=S=class extends N.wq{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,r,i){if(i.layer&&i.layer.spatialReference&&!i.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,$.Up)(e.spatialReference,i.layer.spatialReference))return void(i&&i.messages&&i.messages.push(new V.Z("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:i.layer.spatialReference,context:i})));const o=new P.Z;(0,$.Wt)(e,o,i.layer.spatialReference),t[r]=o.toJSON(i)}else t[r]=e.toJSON(i);delete t[r].spatialReference}clone(){return new S({geometry:(0,J.d9)(this.geometry),type:this.type})}};(0,i._)([(0,n.Cb)({type:P.Z}),g()],D.prototype,"geometry",void 0),(0,i._)([(0,L.c)(["web-scene","portal-item"],"geometry")],D.prototype,"writeGeometry",null),(0,i._)([(0,n.Cb)({type:["clip","mask","replace"],nonNullable:!0}),g()],D.prototype,"type",void 0),D=S=(0,i._)([(0,a.j)("esri.layers.support.SceneModification")],D);const K=D;var A;let q=A=class extends((0,N.eC)(H.Z.ofType(K))){constructor(e){super(e),this.url=null}toJSON(e){return this.toArray().map((t=>t.toJSON(e))).filter((e=>!!e.geometry))}clone(){return new A({url:this.url,items:this.items.map((e=>e.clone()))})}_readModifications(e,t){for(const r of e)this.add(K.fromJSON(r,t))}static fromJSON(e,t){const r=new A;return r._readModifications(e,t),r}static async fromUrl(e,t,r){const i={url:(0,u.mN)(e),origin:"service"},n=await(0,Z.default)(e,{responseType:"json",signal:(0,o.U2)(r,"signal")}),s=t.toJSON(),a=[];for(const e of n.data)a.push(K.fromJSON({...e,geometry:{...e.geometry,spatialReference:s}},i));return new A({url:e,items:a})}};(0,i._)([(0,n.Cb)({type:String})],q.prototype,"url",void 0),q=A=(0,i._)([(0,a.j)("esri.layers.support.SceneModifications")],q);const F=q;let Y=class extends((0,j.V)((0,O.Y)((0,x.q)((0,I.I)((0,T.M)((0,M.R)(C.Z))))))){constructor(...e){super(...e),this.handles=new b.Z,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add((0,R.on)(this,"modifications","after-changes",(()=>this.modifications=this.modifications),null,null,!0))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readModifications(e,t,r){this._modificationsSource={url:(0,c.f)(e,r),context:r}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=(0,o.U2)(e,"signal");try{await this.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(e){(0,_.r9)(e)}if(await this._fetchService(t),(0,o.pC)(this._modificationsSource)){const t=await F.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._fetchIndexAndUpdateExtent(this.nodePages,t)}beforeSave(){if(!(0,o.Wi)(this._modificationsSource))return this.load().then((()=>{}),(()=>{}))}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return this._debouncedSaveOperations(0,e)}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new l.Z("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new l.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new l.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};(0,i._)([(0,n.Cb)({type:String,readOnly:!0})],Y.prototype,"geometryType",void 0),(0,i._)([(0,n.Cb)({type:["show","hide"]})],Y.prototype,"listMode",void 0),(0,i._)([(0,n.Cb)({type:["IntegratedMeshLayer"]})],Y.prototype,"operationalLayerType",void 0),(0,i._)([(0,n.Cb)({json:{read:!1},readOnly:!0})],Y.prototype,"type",void 0),(0,i._)([(0,n.Cb)({type:k.U4,readOnly:!0})],Y.prototype,"nodePages",void 0),(0,i._)([(0,n.Cb)({type:[k.QI],readOnly:!0})],Y.prototype,"materialDefinitions",void 0),(0,i._)([(0,n.Cb)({type:[k.Yh],readOnly:!0})],Y.prototype,"textureSetDefinitions",void 0),(0,i._)([(0,n.Cb)({type:[k.H3],readOnly:!0})],Y.prototype,"geometryDefinitions",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],Y.prototype,"serviceUpdateTimeStamp",void 0),(0,i._)([(0,n.Cb)({type:F}),g({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],Y.prototype,"modifications",void 0),(0,i._)([(0,s.r)(["web-scene","portal-item"],"modifications")],Y.prototype,"readModifications",null),(0,i._)([(0,n.Cb)(U.PV)],Y.prototype,"elevationInfo",void 0),(0,i._)([(0,n.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],Y.prototype,"path",void 0),Y=(0,i._)([(0,a.j)("esri.layers.IntegratedMeshLayer")],Y);const B=Y}}]);