"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[3597],{61489:(e,a,i)=>{i.r(a),i.d(a,{classBreaks:()=>I,heatmapStatistics:()=>z,histogram:()=>x,summaryStatistics:()=>p,uniqueValues:()=>v});i(91957),i(70375);var n=i(61681),t=i(95550),l=i(14685),o=i(7505),s=i(35925),r=(i(17095),i(94672)),u=i(76432),f=i(30879),m=i(67666);let d=null;async function c(e,a){if(!a)return[];const{field:i,field2:n,field3:t,fieldDelimiter:o}=e,s=e.valueExpression,r=e.normalizationType,m=e.normalizationField,c=e.normalizationTotal,p=[],v=e.viewInfoParams;let I=null,x=null;if(s){if(!d){const{arcadeUtils:e}=await(0,f.LC)();d=e}I=d.createFunction(s),x=v&&d.getViewInfo({viewingMode:v.viewingMode,scale:v.scale,spatialReference:new l.Z(v.spatialReference)})}const z=e.fieldInfos,w=a[0]&&"declaredClass"in a[0]&&"esri.Graphic"===a[0].declaredClass||!z?null:{fields:z};return a.forEach((e=>{const a=e.attributes;let l;if(s){const a=w?{...e,layer:w}:e,i=d.createExecContext(a,x);l=d.executeFunction(I,i)}else a&&(l=a[i],n&&(l=`${(0,u.wk)(l)}${o}${(0,u.wk)(a[n])}`,t&&(l=`${l}${o}${(0,u.wk)(a[t])}`)));if(r&&"number"==typeof l&&isFinite(l)){const e=a&&parseFloat(a[m]);l=(0,u.fk)(l,r,e,c)}p.push(l)})),p}async function p(e){const{attribute:a,features:i}=e,{normalizationType:n,normalizationField:t,minValue:l,maxValue:o,fieldType:s}=a,r=await c({field:a.field,valueExpression:a.valueExpression,normalizationType:n,normalizationField:t,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},i),f=(0,u.S5)({normalizationType:n,normalizationField:t,minValue:l,maxValue:o}),m={value:.5,fieldType:s},d="esriFieldTypeString"===s?(0,u.H0)({values:r,supportsNullCount:f,percentileParams:m}):(0,u.i5)({values:r,minValue:l,maxValue:o,useSampleStdDev:!n,supportsNullCount:f,percentileParams:m});return(0,u.F_)(d,"esriFieldTypeDate"===s)}async function v(e){const{attribute:a,features:i}=e,n=await c({field:a.field,field2:a.field2,field3:a.field3,fieldDelimiter:a.fieldDelimiter,valueExpression:a.valueExpression,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},i),t=(0,u.eT)(n);return(0,u.Qm)(t,a.domains,a.returnAllCodedValues,a.fieldDelimiter)}async function I(e){const{attribute:a,features:i}=e,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s}=a,r=await c({field:n,valueExpression:a.valueExpression,normalizationType:t,normalizationField:l,normalizationTotal:o,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},i),f=(0,u.G2)(r,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:a.standardDeviationInterval,numClasses:a.numClasses,minValue:a.minValue,maxValue:a.maxValue});return(0,u.DL)(f,s)}async function x(e){const{attribute:a,features:i}=e,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s}=a,r=await c({field:n,valueExpression:a.valueExpression,normalizationType:t,normalizationField:l,normalizationTotal:o,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},i);return(0,u.oF)(r,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:a.standardDeviationInterval,numBins:a.numBins,minValue:a.minValue,maxValue:a.maxValue})}async function z(e){const{attribute:a,features:i}=e,{field:l,radius:u,fieldOffset:f,transform:d,spatialReference:c,size:p}=a,v=function(e,a,i,t){const l=(0,s.MP)(i)?(0,s.C5)(i):null,r=l?Math.round((l.valid[1]-l.valid[0])/a.scale[0]):null;return e.map((e=>{const i=new m.Z((0,n.Wg)(e.geometry));return(0,o.RF)(a,i,i,i.hasZ,i.hasM),e.geometry=l?function(e,a,i){return e.x<0?e.x+=a:e.x>i&&(e.x-=a),e}(i,r,t[0]):i,e}))}(i,d,c,p),{count:I,min:x,max:z,mean:w,stdDev:y}=function(e,a=18,i,n,l,o){const s=new Float64Array(l*o);a=Math.round((0,t.F2)(a));let u=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,m=0,d=0,c=0,p=0;const v=(0,r.wx)(n,i);for(const{geometry:i,attributes:n}of e){const{x:e,y:t}=i,I=Math.max(0,e-a),x=Math.max(0,t-a),z=Math.min(o,t+a),w=Math.min(l,e+a),y=+v(n);for(let i=x;i<z;i++)for(let n=I;n<w;n++){const o=i*l+n,v=(0,r.If)(n-e,i-t,a),I=s[o];m=s[o]+=v*y;const x=m-I;d+=x,c+=x*x,m<u&&(u=m),m>f&&(f=m),p++}}if(!p)return{mean:0,stddev:0,min:0,max:0,mid:0,count:0};const I=(f-u)/2;return{mean:d/p,stdDev:Math.sqrt((c-d*d/p)/p),min:u,max:f,mid:I,count:p}}(v,u,f,l,p[0],p[1]);return{count:I,min:x,max:z,avg:w,stddev:y}}}}]);