"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[2065],{42557:(t,e,i)=>{i.d(e,{B:()=>f});var n=i(61681),r=i(71760),o=i(3466),s=i(12173),l=i(41610),a=i(65943),p=i(81977);function u(t){return y[function(t){return t instanceof Blob?t.type:function(t){const e=(0,o.Ml)(t);return h[e]||c}(t.url)}(t)]||d}const y={},c="text/plain",d=y[c],h={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const t in h)y[h[t]]=t;var g=i(16641);function f(t){const e=(0,n.pC)(t)&&t.origins?t.origins:[void 0];return(i,s)=>{const y=function(t,e,i){if((0,n.pC)(t)&&"resource"===t.type)return function(t,e,i){const s=(0,l.VZ)(e,i);return{type:String,read:(t,e,i)=>{const n=(0,g.r)(t,e,i);return s.type===String?n:"function"==typeof s.type?new s.type({url:n}):void 0},write:{writer(e,l,p,y){if(!y||!y.resources)return"string"==typeof e?void(l[p]=(0,g.t)(e,y)):void(l[p]=e.write({},y));const c=function(t){return(0,n.Wi)(t)?null:"string"==typeof t?t:t.url}(e),d=c?(0,g.t)(c,{...y,verifyItemRelativeUrls:y&&y.verifyItemRelativeUrls?{writtenUrls:y.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},g.M.NO):null,h=s.type!==String&&(!(0,r.l)(this)||y&&y.origin&&this.originIdOf(i)>(0,a.M9)(y.origin));y&&y.portalItem&&(0,n.pC)(d)&&!(0,o.YP)(d)?h?function(t,e,i,n,r,s,l,a){const p=l.portalItem.resourceFromPath(n),y=C(i,n,l);u(y)===(0,o.Ml)(p.path)?(v(t,e,p,y,l.resources.toUpdate),r[s]=n):b(t,e,i,n,r,s,l,a)}(this,i,e,d,l,p,y,t):function(t,e,i,n){n.resources.toKeep.push({resource:n.portalItem.resourceFromPath(t)}),e[i]=t}(d,l,p,y):y&&y.portalItem&&((0,n.Wi)(d)||(0,n.pC)((0,g.i)(d))||(0,o.jc)(d)||h)?b(this,i,e,d,l,p,y,t):l[p]=d}}}}(t,e,i);switch((0,n.pC)(t)&&t.type?t.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:e}=g.p;return{read:t,write:e}}}}(t,i,s);for(const t of e){const e=(0,p.CJ)(i,t,s);for(const t in y)e[t]=y[t]}}}function b(t,e,r,l,a,p,y,c){const d=(0,s.D)(),h=C(r,l,y),g=(0,o.v_)((0,n.U2)(c,"prefix"),d),f=`${g}.${u(h)}`,b=y.portalItem.resourceFromPath(f);(0,o.jc)(l)&&y.resources.pendingOperations.push(async function(t){const e=(await Promise.resolve().then(i.bind(i,66341))).default,{data:n}=await e(t,{responseType:"blob"});return n}(l).then((t=>{b.path=`${g}.${u(t)}`,a[p]=b.itemRelativeUrl})).catch((()=>{}))),v(t,e,b,h,y.resources.toAdd),a[p]=b.itemRelativeUrl}function v(t,e,i,n,r){r.push({resource:i,content:n,finish:i=>{!function(t,e,i){"string"==typeof t[e]?t[e]=i.url:t[e].url=i.url}(t,e,i)}})}function C(t,e,i){return"string"==typeof t?{url:e}:new Blob([JSON.stringify(t.toJSON(i))],{type:"application/json"})}},71760:(t,e,i)=>{function n(t){return t&&"getAtOrigin"in t&&"originOf"in t}i.d(e,{l:()=>n})},92065:(t,e,i)=>{i.r(e),i.d(e,{default:()=>U});var n=i(36663),r=i(53443),o=i(41151),s=i(86618),l=i(82064),a=i(61681),p=i(81977),u=(i(7753),i(39994),i(7283),i(40266));let y=0,c=class extends((0,l.eC)((0,o.J)((0,s.IG)(r.Z)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${y++}`,this.title=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if((0,a.pC)(e))switch(e.type){case"line-of-sight":e.removeAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}get isEditable(){return this.requiredPropertiesForEditing.every(a.pC)}};(0,n._)([(0,p.Cb)({type:String,constructOnly:!0,clonable:!1})],c.prototype,"id",void 0),(0,n._)([(0,p.Cb)({type:String})],c.prototype,"title",void 0),(0,n._)([(0,p.Cb)({constructOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,p.Cb)({clonable:!1,value:null})],c.prototype,"parent",null),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"extent",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"isEditable",null),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"requiredPropertiesForEditing",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"nonEditableMessage",void 0),c=(0,n._)([(0,u.j)("esri.analysis.Analysis")],c);const d=c;function h(t,e){return g(t)===g(e)}function g(t){if((0,a.Wi)(t))return null;const e=null!=t.layer?t.layer.id:"";let i=null;return i=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==i?null:`o-${e}-${i}`}const f={json:{write:{writer:function(t,e){(0,a.Wi)(t)||null==t.layer?.objectIdField||null==t.attributes||(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}}};var b=i(42557),v=i(53446),C=i(74710);let _=class extends((0,l.eC)((0,o.J)(r.Z))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,a._W)(this.position,t.position)&&(0,a._W)(this.elevationInfo,t.elevationInfo)&&h(this.feature,t.feature)}};(0,n._)([(0,p.Cb)({type:v.Z}),(0,b.B)()],_.prototype,"position",void 0),(0,n._)([(0,p.Cb)({type:C.ZP}),(0,b.B)()],_.prototype,"elevationInfo",void 0),(0,n._)([(0,p.Cb)(f)],_.prototype,"feature",void 0),_=(0,n._)([(0,u.j)("esri.analysis.LineOfSightAnalysisObserver")],_);const m=_;let w=class extends((0,l.eC)(o.j)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,a._W)(this.position,t.position)&&(0,a._W)(this.elevationInfo,t.elevationInfo)&&h(this.feature,t.feature)}};(0,n._)([(0,p.Cb)({type:v.Z}),(0,b.B)()],w.prototype,"position",void 0),(0,n._)([(0,p.Cb)({type:C.ZP}),(0,b.B)()],w.prototype,"elevationInfo",void 0),(0,n._)([(0,p.Cb)(f)],w.prototype,"feature",void 0),w=(0,n._)([(0,u.j)("esri.analysis.LineOfSightAnalysisTarget")],w);const j=w;var I=i(6865),x=i(58811),O=i(76868),E=i(92376),S=i(37116);i(91478);const P=I.Z.ofType(j);let R=class extends d{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}initialize(){this.own((0,O.YP)((()=>this._computeExtent()),(t=>{((0,a.Wi)(t)||(0,a.Wi)(t.pending))&&this._set("extent",(0,a.pC)(t)?t.extent:null)}),O.tX))}get targets(){return this._get("targets")||new P}set targets(t){this._set("targets",(0,x.Z)(t,this.targets,P))}get spatialReference(){return(0,a.pC)(this.observer)&&(0,a.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,a.yw)(this.observer,(t=>t.position))]}async waitComputeExtent(){const t=this._computeExtent();return(0,a.pC)(t)?(0,a.Wg)(t.pending):null}_computeExtent(){const t=this.spatialReference;if((0,a.Wi)(this.observer)||(0,a.Wi)(this.observer.position)||(0,a.Wi)(t))return null;const e=t=>"absolute-height"===function(t,e){return function(t,e){return(0,a.Wi)(e)||!e.mode?t?"absolute-height":"on-the-ground":e.mode}(!!(0,a.pC)(t)&&t.hasZ,e)}(t.position,t.elevationInfo),i=this.observer.position,n=(0,S.al)(i.x,i.y,i.z,i.x,i.y,i.z);for(const e of this.targets)if((0,a.pC)(e.position)){const i=(0,E.dz)(e.position,t);if((0,a.pC)(i.pending))return{pending:i.pending,extent:null};if((0,a.pC)(i.geometry)){const{x:t,y:e,z:r}=i.geometry;(0,S.pp)(n,[t,e,r])}}const r=(0,S.HH)(n,t);return e(this.observer)&&this.targets.every(e)||(r.zmin=null,r.zmax=null),{pending:null,extent:r}}clear(){this.observer=null,this.targets.removeAll()}};(0,n._)([(0,p.Cb)({type:["line-of-sight"]})],R.prototype,"type",void 0),(0,n._)([(0,p.Cb)({type:m,json:{read:!0,write:!0}})],R.prototype,"observer",void 0),(0,n._)([(0,p.Cb)({cast:x.R,type:P,nonNullable:!0,json:{read:!0,write:!0}})],R.prototype,"targets",null),(0,n._)([(0,p.Cb)({value:null,readOnly:!0})],R.prototype,"extent",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],R.prototype,"spatialReference",null),(0,n._)([(0,p.Cb)({readOnly:!0})],R.prototype,"requiredPropertiesForEditing",null),(0,n._)([(0,p.Cb)({readOnly:!0})],R.prototype,"nonEditableMessage",void 0),R=(0,n._)([(0,u.j)("esri.analysis.LineOfSightAnalysis")],R);const W=R;var F=i(15842),z=i(38481),Z=i(43330);const L=I.Z.ofType(j);let A=class extends((0,Z.q)((0,F.R)(z.Z))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new W,this.opacity=1}initialize(){this.own((0,O.YP)((()=>this.analysis),((t,e)=>{(0,a.pC)(e)&&e.parent===this&&(e.parent=null),(0,a.pC)(t)&&(t.parent=this)}),O.tX))}async load(){return(0,a.pC)(this.analysis)&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,a.yw)(this.analysis,(t=>t.observer))}set observer(t){(0,a.yw)(this.analysis,(e=>e.observer=t))}get targets(){return(0,a.pC)(this.analysis)?this.analysis.targets:null}set targets(t){(0,a.yw)(this.analysis,(e=>e.targets=t))}get fullExtent(){return(0,a.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,a.pC)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(t){this.analysis===t&&(this.analysis=new W)}};(0,n._)([(0,p.Cb)({json:{read:!1},readOnly:!0})],A.prototype,"type",void 0),(0,n._)([(0,p.Cb)({type:["LineOfSightLayer"]})],A.prototype,"operationalLayerType",void 0),(0,n._)([(0,p.Cb)({type:m,json:{read:!0,write:{ignoreOrigin:!0}}})],A.prototype,"observer",null),(0,n._)([(0,p.Cb)({type:L,json:{read:!0,write:{ignoreOrigin:!0}}})],A.prototype,"targets",null),(0,n._)([(0,p.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],A.prototype,"analysis",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],A.prototype,"fullExtent",null),(0,n._)([(0,p.Cb)({readOnly:!0})],A.prototype,"spatialReference",null),(0,n._)([(0,p.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],A.prototype,"opacity",void 0),(0,n._)([(0,p.Cb)({type:["show","hide"]})],A.prototype,"listMode",void 0),A=(0,n._)([(0,u.j)("esri.layers.LineOfSightLayer")],A);const U=A}}]);